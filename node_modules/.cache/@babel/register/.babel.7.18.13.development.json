{"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const express = require('express');\n\nrequire('dotenv').config();\n\nconst {\n  ApolloServer\n} = require('apollo-server-express');\n\nconst typeDefs = require('./graphql/schema');\n\nconst resolvers = require('./graphql/resolvers');\n\nconst dbconnection = require('./data/connectors');\n\nconst cors = require('cors');\n\nconst cookieParser = require('cookie-parser');\n\nconst app = express();\napp.use((req, res, next) => {\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  next();\n});\nconst corsOptions = {\n  origin: 'http://localhost:3000',\n  credentials: true\n};\napp.use(cors(corsOptions));\napp.use(cookieParser());\n\nasync function startApolloServer() {\n  const server = new ApolloServer({\n    typeDefs,\n    resolvers,\n    context: async ({\n      req,\n      res\n    }) => {\n      const token = req.cookies['token'] || '';\n      return {\n        token,\n        res\n      };\n    }\n  });\n  await server.start(); // Ensure the server is started before applying middleware\n\n  server.applyMiddleware({\n    app,\n    path: '/graphql',\n    cors: corsOptions\n  });\n  const port = process.env.PORT || 8181;\n  app.listen({\n    port: port\n  }, () => {\n    console.log(`Apollo Server on port ${port}/graphql`);\n  });\n}\n\nstartApolloServer().catch(error => {\n  console.error('Error starting Apollo Server:', error);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvbmZpZyIsIkFwb2xsb1NlcnZlciIsInR5cGVEZWZzIiwicmVzb2x2ZXJzIiwiZGJjb25uZWN0aW9uIiwiY29ycyIsImNvb2tpZVBhcnNlciIsImFwcCIsInVzZSIsInJlcSIsInJlcyIsIm5leHQiLCJzZXRIZWFkZXIiLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsImNyZWRlbnRpYWxzIiwic3RhcnRBcG9sbG9TZXJ2ZXIiLCJzZXJ2ZXIiLCJjb250ZXh0IiwidG9rZW4iLCJjb29raWVzIiwic3RhcnQiLCJhcHBseU1pZGRsZXdhcmUiLCJwYXRoIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyb3IiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuY29uc3QgeyBBcG9sbG9TZXJ2ZXIgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcycpO1xuY29uc3QgdHlwZURlZnMgPSByZXF1aXJlKCcuL2dyYXBocWwvc2NoZW1hJyk7XG5jb25zdCByZXNvbHZlcnMgPSByZXF1aXJlKCcuL2dyYXBocWwvcmVzb2x2ZXJzJyk7XG5jb25zdCBkYmNvbm5lY3Rpb24gPSByZXF1aXJlKCcuL2RhdGEvY29ubmVjdG9ycycpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IGNvb2tpZVBhcnNlciA9IHJlcXVpcmUoJ2Nvb2tpZS1wYXJzZXInKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXMuc2V0SGVhZGVyKCdYLUNvbnRlbnQtVHlwZS1PcHRpb25zJywgJ25vc25pZmYnKTtcbiAgbmV4dCgpO1xufSk7XG5cblxuY29uc3QgY29yc09wdGlvbnMgPSB7XG4gIG9yaWdpbjogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXG4gIGNyZWRlbnRpYWxzOiB0cnVlLFxufTtcblxuYXBwLnVzZShjb3JzKGNvcnNPcHRpb25zKSk7XG5hcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcblxuYXN5bmMgZnVuY3Rpb24gc3RhcnRBcG9sbG9TZXJ2ZXIoKSB7XG4gIGNvbnN0IHNlcnZlciA9IG5ldyBBcG9sbG9TZXJ2ZXIoeyBcbiAgICB0eXBlRGVmcywgXG4gICAgcmVzb2x2ZXJzLFxuICAgIGNvbnRleHQ6IGFzeW5jICh7IHJlcSwgcmVzIH0pID0+IHtcbiAgICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXNbJ3Rva2VuJ10gfHwgJyc7XG4gICAgICByZXR1cm4geyB0b2tlbiwgcmVzIH07XG4gICAgfSxcbiAgfSk7XG5cbiAgYXdhaXQgc2VydmVyLnN0YXJ0KCk7IC8vIEVuc3VyZSB0aGUgc2VydmVyIGlzIHN0YXJ0ZWQgYmVmb3JlIGFwcGx5aW5nIG1pZGRsZXdhcmVcbiAgXG4gIHNlcnZlci5hcHBseU1pZGRsZXdhcmUoeyBhcHAsIHBhdGg6ICcvZ3JhcGhxbCcsIGNvcnM6IGNvcnNPcHRpb25zIH0pO1xuICBjb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA4MTgxO1xuICBhcHAubGlzdGVuKHsgcG9ydDogcG9ydCB9LCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coYEFwb2xsbyBTZXJ2ZXIgb24gcG9ydCAke3BvcnR9L2dyYXBocWxgKTtcbiAgfSk7XG59XG5cbnN0YXJ0QXBvbGxvU2VydmVyKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YXJ0aW5nIEFwb2xsbyBTZXJ2ZXI6JywgZXJyb3IpO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0FBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCOztBQUNBLE1BQU07RUFBRUM7QUFBRixJQUFtQkYsT0FBTyxDQUFDLHVCQUFELENBQWhDOztBQUNBLE1BQU1HLFFBQVEsR0FBR0gsT0FBTyxDQUFDLGtCQUFELENBQXhCOztBQUNBLE1BQU1JLFNBQVMsR0FBR0osT0FBTyxDQUFDLHFCQUFELENBQXpCOztBQUNBLE1BQU1LLFlBQVksR0FBR0wsT0FBTyxDQUFDLG1CQUFELENBQTVCOztBQUNBLE1BQU1NLElBQUksR0FBR04sT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsTUFBTU8sWUFBWSxHQUFHUCxPQUFPLENBQUMsZUFBRCxDQUE1Qjs7QUFFQSxNQUFNUSxHQUFHLEdBQUdULE9BQU8sRUFBbkI7QUFFQVMsR0FBRyxDQUFDQyxHQUFKLENBQVEsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7RUFDMUJELEdBQUcsQ0FBQ0UsU0FBSixDQUFjLHdCQUFkLEVBQXdDLFNBQXhDO0VBQ0FELElBQUk7QUFDTCxDQUhEO0FBTUEsTUFBTUUsV0FBVyxHQUFHO0VBQ2xCQyxNQUFNLEVBQUUsdUJBRFU7RUFFbEJDLFdBQVcsRUFBRTtBQUZLLENBQXBCO0FBS0FSLEdBQUcsQ0FBQ0MsR0FBSixDQUFRSCxJQUFJLENBQUNRLFdBQUQsQ0FBWjtBQUNBTixHQUFHLENBQUNDLEdBQUosQ0FBUUYsWUFBWSxFQUFwQjs7QUFFQSxlQUFlVSxpQkFBZixHQUFtQztFQUNqQyxNQUFNQyxNQUFNLEdBQUcsSUFBSWhCLFlBQUosQ0FBaUI7SUFDOUJDLFFBRDhCO0lBRTlCQyxTQUY4QjtJQUc5QmUsT0FBTyxFQUFFLE9BQU87TUFBRVQsR0FBRjtNQUFPQztJQUFQLENBQVAsS0FBd0I7TUFDL0IsTUFBTVMsS0FBSyxHQUFHVixHQUFHLENBQUNXLE9BQUosQ0FBWSxPQUFaLEtBQXdCLEVBQXRDO01BQ0EsT0FBTztRQUFFRCxLQUFGO1FBQVNUO01BQVQsQ0FBUDtJQUNEO0VBTjZCLENBQWpCLENBQWY7RUFTQSxNQUFNTyxNQUFNLENBQUNJLEtBQVAsRUFBTixDQVZpQyxDQVVYOztFQUV0QkosTUFBTSxDQUFDSyxlQUFQLENBQXVCO0lBQUVmLEdBQUY7SUFBT2dCLElBQUksRUFBRSxVQUFiO0lBQXlCbEIsSUFBSSxFQUFFUTtFQUEvQixDQUF2QjtFQUNBLE1BQU1XLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLElBQVosSUFBb0IsSUFBakM7RUFDQXBCLEdBQUcsQ0FBQ3FCLE1BQUosQ0FBVztJQUFFSixJQUFJLEVBQUVBO0VBQVIsQ0FBWCxFQUEyQixNQUFNO0lBQy9CSyxPQUFPLENBQUNDLEdBQVIsQ0FBYSx5QkFBd0JOLElBQUssVUFBMUM7RUFDRCxDQUZEO0FBR0Q7O0FBRURSLGlCQUFpQixHQUFHZSxLQUFwQixDQUEyQkMsS0FBRCxJQUFXO0VBQ25DSCxPQUFPLENBQUNHLEtBQVIsQ0FBYywrQkFBZCxFQUErQ0EsS0FBL0M7QUFDRCxDQUZEIn0=","map":{"version":3,"names":["express","require","config","ApolloServer","typeDefs","resolvers","dbconnection","cors","cookieParser","app","use","req","res","next","setHeader","corsOptions","origin","credentials","startApolloServer","server","context","token","cookies","start","applyMiddleware","path","port","process","env","PORT","listen","console","log","catch","error"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/","sources":["index.js"],"sourcesContent":["const express = require('express');\nrequire('dotenv').config();\nconst { ApolloServer } = require('apollo-server-express');\nconst typeDefs = require('./graphql/schema');\nconst resolvers = require('./graphql/resolvers');\nconst dbconnection = require('./data/connectors');\nconst cors = require('cors');\nconst cookieParser = require('cookie-parser');\n\nconst app = express();\n\napp.use((req, res, next) => {\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  next();\n});\n\n\nconst corsOptions = {\n  origin: 'http://localhost:3000',\n  credentials: true,\n};\n\napp.use(cors(corsOptions));\napp.use(cookieParser());\n\nasync function startApolloServer() {\n  const server = new ApolloServer({ \n    typeDefs, \n    resolvers,\n    context: async ({ req, res }) => {\n      const token = req.cookies['token'] || '';\n      return { token, res };\n    },\n  });\n\n  await server.start(); // Ensure the server is started before applying middleware\n  \n  server.applyMiddleware({ app, path: '/graphql', cors: corsOptions });\n  const port = process.env.PORT || 8181;\n  app.listen({ port: port }, () => {\n    console.log(`Apollo Server on port ${port}/graphql`);\n  });\n}\n\nstartApolloServer().catch((error) => {\n  console.error('Error starting Apollo Server:', error);\n});\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,MAAM;EAAEC;AAAF,IAAmBF,OAAO,CAAC,uBAAD,CAAhC;;AACA,MAAMG,QAAQ,GAAGH,OAAO,CAAC,kBAAD,CAAxB;;AACA,MAAMI,SAAS,GAAGJ,OAAO,CAAC,qBAAD,CAAzB;;AACA,MAAMK,YAAY,GAAGL,OAAO,CAAC,mBAAD,CAA5B;;AACA,MAAMM,IAAI,GAAGN,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMO,YAAY,GAAGP,OAAO,CAAC,eAAD,CAA5B;;AAEA,MAAMQ,GAAG,GAAGT,OAAO,EAAnB;AAEAS,GAAG,CAACC,GAAJ,CAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;EAC1BD,GAAG,CAACE,SAAJ,CAAc,wBAAd,EAAwC,SAAxC;EACAD,IAAI;AACL,CAHD;AAMA,MAAME,WAAW,GAAG;EAClBC,MAAM,EAAE,uBADU;EAElBC,WAAW,EAAE;AAFK,CAApB;AAKAR,GAAG,CAACC,GAAJ,CAAQH,IAAI,CAACQ,WAAD,CAAZ;AACAN,GAAG,CAACC,GAAJ,CAAQF,YAAY,EAApB;;AAEA,eAAeU,iBAAf,GAAmC;EACjC,MAAMC,MAAM,GAAG,IAAIhB,YAAJ,CAAiB;IAC9BC,QAD8B;IAE9BC,SAF8B;IAG9Be,OAAO,EAAE,OAAO;MAAET,GAAF;MAAOC;IAAP,CAAP,KAAwB;MAC/B,MAAMS,KAAK,GAAGV,GAAG,CAACW,OAAJ,CAAY,OAAZ,KAAwB,EAAtC;MACA,OAAO;QAAED,KAAF;QAAST;MAAT,CAAP;IACD;EAN6B,CAAjB,CAAf;EASA,MAAMO,MAAM,CAACI,KAAP,EAAN,CAViC,CAUX;;EAEtBJ,MAAM,CAACK,eAAP,CAAuB;IAAEf,GAAF;IAAOgB,IAAI,EAAE,UAAb;IAAyBlB,IAAI,EAAEQ;EAA/B,CAAvB;EACA,MAAMW,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;EACApB,GAAG,CAACqB,MAAJ,CAAW;IAAEJ,IAAI,EAAEA;EAAR,CAAX,EAA2B,MAAM;IAC/BK,OAAO,CAACC,GAAR,CAAa,yBAAwBN,IAAK,UAA1C;EACD,CAFD;AAGD;;AAEDR,iBAAiB,GAAGe,KAApB,CAA2BC,KAAD,IAAW;EACnCH,OAAO,CAACG,KAAR,CAAc,+BAAd,EAA+CA,KAA/C;AACD,CAFD"}},"mtime":1705165971920},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/schema/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/schema/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const {\n  gql\n} = require('apollo-server-express');\n\nconst typeDefs = gql`\ntype Query {\n    getAllPublishedArticles(categories: [String]): [Article!]\n    getArticleById(id: String!): Article\n    getArticlesByDate(from: String!, to: String!): [Article!]\n    getCategories: [Category]\n    getAllProjects: [Article!]\n    getAllArticles: [Article!]\n}\n\ninput ArticleInput {\n    title: String!\n    summary: String!\n    content: String!\n    imageUrl: String!\n    categories: [String]\n    published: Boolean!\n    project: Boolean!\n    id: String\n}\n\ninput UserInput {\n    username: String!\n    password: String!\n    firstName: String\n    lastName: String\n}\n\ntype Mutation {\n    createArticle(input: ArticleInput!): Article!\n    createCategory(categoryName: String!): Category!\n    deleteArticle(id: String!): Boolean!\n    login(username: String!, password: String!): AuthToken!\n    createUser(input:UserInput!): AuthConfirm!\n}\n\ntype Article {\n    id: String\n    title: String\n    summary: String\n    content: String\n    imageUrl: String\n    date: String\n    categories: [String]\n    published: Boolean\n    project: Boolean\n}\n\ntype Category {\n    id: String\n    name: String\n}\n\ntype AuthToken {\n    token: String!\n}\n\ntype AuthConfirm {\n    message: String!\n}\n`;\nmodule.exports = typeDefs;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJncWwiLCJyZXF1aXJlIiwidHlwZURlZnMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamFtZXNzdG9yci9Qcm9qZWN0cy9Qb3J0Zm9saW8vcG9ydGZvbGlvLXNlcnZpY2VzL3NyYy9ncmFwaHFsL3NjaGVtYS8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuY29uc3QgeyBncWwgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcycpO1xuXG5jb25zdCB0eXBlRGVmcyA9IGdxbGBcbnR5cGUgUXVlcnkge1xuICAgIGdldEFsbFB1Ymxpc2hlZEFydGljbGVzKGNhdGVnb3JpZXM6IFtTdHJpbmddKTogW0FydGljbGUhXVxuICAgIGdldEFydGljbGVCeUlkKGlkOiBTdHJpbmchKTogQXJ0aWNsZVxuICAgIGdldEFydGljbGVzQnlEYXRlKGZyb206IFN0cmluZyEsIHRvOiBTdHJpbmchKTogW0FydGljbGUhXVxuICAgIGdldENhdGVnb3JpZXM6IFtDYXRlZ29yeV1cbiAgICBnZXRBbGxQcm9qZWN0czogW0FydGljbGUhXVxuICAgIGdldEFsbEFydGljbGVzOiBbQXJ0aWNsZSFdXG59XG5cbmlucHV0IEFydGljbGVJbnB1dCB7XG4gICAgdGl0bGU6IFN0cmluZyFcbiAgICBzdW1tYXJ5OiBTdHJpbmchXG4gICAgY29udGVudDogU3RyaW5nIVxuICAgIGltYWdlVXJsOiBTdHJpbmchXG4gICAgY2F0ZWdvcmllczogW1N0cmluZ11cbiAgICBwdWJsaXNoZWQ6IEJvb2xlYW4hXG4gICAgcHJvamVjdDogQm9vbGVhbiFcbiAgICBpZDogU3RyaW5nXG59XG5cbmlucHV0IFVzZXJJbnB1dCB7XG4gICAgdXNlcm5hbWU6IFN0cmluZyFcbiAgICBwYXNzd29yZDogU3RyaW5nIVxuICAgIGZpcnN0TmFtZTogU3RyaW5nXG4gICAgbGFzdE5hbWU6IFN0cmluZ1xufVxuXG50eXBlIE11dGF0aW9uIHtcbiAgICBjcmVhdGVBcnRpY2xlKGlucHV0OiBBcnRpY2xlSW5wdXQhKTogQXJ0aWNsZSFcbiAgICBjcmVhdGVDYXRlZ29yeShjYXRlZ29yeU5hbWU6IFN0cmluZyEpOiBDYXRlZ29yeSFcbiAgICBkZWxldGVBcnRpY2xlKGlkOiBTdHJpbmchKTogQm9vbGVhbiFcbiAgICBsb2dpbih1c2VybmFtZTogU3RyaW5nISwgcGFzc3dvcmQ6IFN0cmluZyEpOiBBdXRoVG9rZW4hXG4gICAgY3JlYXRlVXNlcihpbnB1dDpVc2VySW5wdXQhKTogQXV0aENvbmZpcm0hXG59XG5cbnR5cGUgQXJ0aWNsZSB7XG4gICAgaWQ6IFN0cmluZ1xuICAgIHRpdGxlOiBTdHJpbmdcbiAgICBzdW1tYXJ5OiBTdHJpbmdcbiAgICBjb250ZW50OiBTdHJpbmdcbiAgICBpbWFnZVVybDogU3RyaW5nXG4gICAgZGF0ZTogU3RyaW5nXG4gICAgY2F0ZWdvcmllczogW1N0cmluZ11cbiAgICBwdWJsaXNoZWQ6IEJvb2xlYW5cbiAgICBwcm9qZWN0OiBCb29sZWFuXG59XG5cbnR5cGUgQ2F0ZWdvcnkge1xuICAgIGlkOiBTdHJpbmdcbiAgICBuYW1lOiBTdHJpbmdcbn1cblxudHlwZSBBdXRoVG9rZW4ge1xuICAgIHRva2VuOiBTdHJpbmchXG59XG5cbnR5cGUgQXV0aENvbmZpcm0ge1xuICAgIG1lc3NhZ2U6IFN0cmluZyFcbn1cbmA7XG5cblxubW9kdWxlLmV4cG9ydHMgPSB0eXBlRGVmczsiXSwibWFwcGluZ3MiOiJBQUNBLE1BQU07RUFBRUE7QUFBRixJQUFVQyxPQUFPLENBQUMsdUJBQUQsQ0FBdkI7O0FBRUEsTUFBTUMsUUFBUSxHQUFHRixHQUFJO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQTVEQTtBQStEQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCRixRQUFqQiJ9","map":{"version":3,"names":["gql","require","typeDefs","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/schema/","sources":["index.js"],"sourcesContent":["\nconst { gql } = require('apollo-server-express');\n\nconst typeDefs = gql`\ntype Query {\n    getAllPublishedArticles(categories: [String]): [Article!]\n    getArticleById(id: String!): Article\n    getArticlesByDate(from: String!, to: String!): [Article!]\n    getCategories: [Category]\n    getAllProjects: [Article!]\n    getAllArticles: [Article!]\n}\n\ninput ArticleInput {\n    title: String!\n    summary: String!\n    content: String!\n    imageUrl: String!\n    categories: [String]\n    published: Boolean!\n    project: Boolean!\n    id: String\n}\n\ninput UserInput {\n    username: String!\n    password: String!\n    firstName: String\n    lastName: String\n}\n\ntype Mutation {\n    createArticle(input: ArticleInput!): Article!\n    createCategory(categoryName: String!): Category!\n    deleteArticle(id: String!): Boolean!\n    login(username: String!, password: String!): AuthToken!\n    createUser(input:UserInput!): AuthConfirm!\n}\n\ntype Article {\n    id: String\n    title: String\n    summary: String\n    content: String\n    imageUrl: String\n    date: String\n    categories: [String]\n    published: Boolean\n    project: Boolean\n}\n\ntype Category {\n    id: String\n    name: String\n}\n\ntype AuthToken {\n    token: String!\n}\n\ntype AuthConfirm {\n    message: String!\n}\n`;\n\n\nmodule.exports = typeDefs;"],"mappings":"AACA,MAAM;EAAEA;AAAF,IAAUC,OAAO,CAAC,uBAAD,CAAvB;;AAEA,MAAMC,QAAQ,GAAGF,GAAI;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA5DA;AA+DAG,MAAM,CAACC,OAAP,GAAiBF,QAAjB"}},"mtime":1705160623491},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const articleResolvers = require('./articleResolvers');\n\nconst categoryResolvers = require('./categoryResolvers');\n\nconst userResolvers = require('./userResolvers');\n\nconst resolvers = [articleResolvers, categoryResolvers, userResolvers];\nmodule.exports = resolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcnRpY2xlUmVzb2x2ZXJzIiwicmVxdWlyZSIsImNhdGVnb3J5UmVzb2x2ZXJzIiwidXNlclJlc29sdmVycyIsInJlc29sdmVycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjL2dyYXBocWwvcmVzb2x2ZXJzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXJ0aWNsZVJlc29sdmVycyA9IHJlcXVpcmUoJy4vYXJ0aWNsZVJlc29sdmVycycpO1xuY29uc3QgY2F0ZWdvcnlSZXNvbHZlcnMgPSByZXF1aXJlKCcuL2NhdGVnb3J5UmVzb2x2ZXJzJyk7XG5jb25zdCB1c2VyUmVzb2x2ZXJzID0gcmVxdWlyZSgnLi91c2VyUmVzb2x2ZXJzJyk7XG5cbmNvbnN0IHJlc29sdmVycyA9IFthcnRpY2xlUmVzb2x2ZXJzLCBjYXRlZ29yeVJlc29sdmVycywgdXNlclJlc29sdmVyc107XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzb2x2ZXJzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxnQkFBZ0IsR0FBR0MsT0FBTyxDQUFDLG9CQUFELENBQWhDOztBQUNBLE1BQU1DLGlCQUFpQixHQUFHRCxPQUFPLENBQUMscUJBQUQsQ0FBakM7O0FBQ0EsTUFBTUUsYUFBYSxHQUFHRixPQUFPLENBQUMsaUJBQUQsQ0FBN0I7O0FBRUEsTUFBTUcsU0FBUyxHQUFHLENBQUNKLGdCQUFELEVBQW1CRSxpQkFBbkIsRUFBc0NDLGFBQXRDLENBQWxCO0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkYsU0FBakIifQ==","map":{"version":3,"names":["articleResolvers","require","categoryResolvers","userResolvers","resolvers","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["index.js"],"sourcesContent":["const articleResolvers = require('./articleResolvers');\nconst categoryResolvers = require('./categoryResolvers');\nconst userResolvers = require('./userResolvers');\n\nconst resolvers = [articleResolvers, categoryResolvers, userResolvers];\n\nmodule.exports = resolvers"],"mappings":"AAAA,MAAMA,gBAAgB,GAAGC,OAAO,CAAC,oBAAD,CAAhC;;AACA,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,qBAAD,CAAjC;;AACA,MAAME,aAAa,GAAGF,OAAO,CAAC,iBAAD,CAA7B;;AAEA,MAAMG,SAAS,GAAG,CAACJ,gBAAD,EAAmBE,iBAAnB,EAAsCC,aAAtC,CAAlB;AAEAE,MAAM,CAACC,OAAP,GAAiBF,SAAjB"}},"mtime":1704536377793},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/articleResolvers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const {\n  format\n} = require(\"path\");\n\nconst Article = require(\"../../data/models/article\");\n\nconst jwt = require(\"jsonwebtoken\");\n\nfunction verifyToken(token, secret) {\n  try {\n    const decoded = jwt.verify(token, secret);\n    return decoded;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n\nfunction formatDate(date) {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${day}-${month}-${year}`;\n}\n\nconst articleResolvers = {\n  Query: {\n    getAllPublishedArticles: async (_, {\n      categories\n    }) => {\n      console.log(categories);\n\n      try {\n        const articles = await Article.getAllPublishedArticles(categories);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching published articles: \" + error.message);\n      }\n    },\n    getArticleById: async (_, {\n      id\n    }) => {\n      try {\n        const article = await Article.getArticleById(id);\n        return article;\n      } catch (error) {\n        throw new Error(\"Error fetching article by ID: \" + error.message);\n      }\n    },\n    getArticlesByDate: async (_, {\n      from,\n      to\n    }) => {\n      try {\n        const articles = await Article.getArticlesByDate(from, to);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching articles by date: \" + error.message);\n      }\n    },\n    getAllProjects: async () => {\n      try {\n        const articles = await Article.getAllProjects();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching projects: \" + error.message);\n      }\n    },\n    getAllArticles: async (_, args, context) => {\n      const {\n        token\n      } = context;\n\n      if (!token) {\n        throw new Error('Authentication required');\n      }\n\n      const decoded = verifyToken(token, process.env.SECRET);\n\n      try {\n        const articles = await Article.getAllArticles();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching all articles: \" + error.message);\n      }\n    }\n  },\n  Mutation: {\n    createArticle: async (_, {\n      input\n    }) => {\n      if (input.id) {\n        try {\n          const updatedArticle = {\n            title: input.title,\n            summary: input.summary,\n            content: input.content,\n            imageUrl: input.imageUrl,\n            categories: input.categories,\n            published: input.published,\n            project: input.project,\n            date: formatDate(new Date())\n          };\n          const response = await Article.updateOne({\n            _id: input.id\n          }, updatedArticle);\n\n          if (response.nModified === 0) {\n            throw new Error(\"Article not updated\");\n          } else {\n            const article = await Article.getArticleById(input.id);\n            return article;\n          }\n        } catch (error) {\n          throw new Error(\"Error updating article: \" + error.message);\n        }\n      }\n\n      try {\n        const newArticle = {\n          title: input.title,\n          summary: input.summary,\n          content: input.content,\n          imageUrl: input.imageUrl,\n          categories: input.categories,\n          published: input.published,\n          project: input.project,\n          date: formatDate(new Date())\n        };\n        const response = await Article.createArticle(newArticle);\n        console.log(response);\n        return response;\n      } catch (error) {\n        throw new Error(\"Error creating article: \" + error.message);\n      }\n    },\n    deleteArticle: async (_, {\n      id\n    }) => {\n      try {\n        const response = await Article.deleteOne({\n          _id: id\n        });\n        return response;\n      } catch (error) {\n        throw new Error(\"Error deleting article: \" + error.message);\n      }\n    }\n  }\n};\nmodule.exports = articleResolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmb3JtYXQiLCJyZXF1aXJlIiwiQXJ0aWNsZSIsImp3dCIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJzZWNyZXQiLCJkZWNvZGVkIiwidmVyaWZ5IiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiU3RyaW5nIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImRheSIsImdldERhdGUiLCJhcnRpY2xlUmVzb2x2ZXJzIiwiUXVlcnkiLCJnZXRBbGxQdWJsaXNoZWRBcnRpY2xlcyIsIl8iLCJjYXRlZ29yaWVzIiwiY29uc29sZSIsImxvZyIsImFydGljbGVzIiwiZ2V0QXJ0aWNsZUJ5SWQiLCJpZCIsImFydGljbGUiLCJnZXRBcnRpY2xlc0J5RGF0ZSIsImZyb20iLCJ0byIsImdldEFsbFByb2plY3RzIiwiZ2V0QWxsQXJ0aWNsZXMiLCJhcmdzIiwiY29udGV4dCIsInByb2Nlc3MiLCJlbnYiLCJTRUNSRVQiLCJNdXRhdGlvbiIsImNyZWF0ZUFydGljbGUiLCJpbnB1dCIsInVwZGF0ZWRBcnRpY2xlIiwidGl0bGUiLCJzdW1tYXJ5IiwiY29udGVudCIsImltYWdlVXJsIiwicHVibGlzaGVkIiwicHJvamVjdCIsIkRhdGUiLCJyZXNwb25zZSIsInVwZGF0ZU9uZSIsIl9pZCIsIm5Nb2RpZmllZCIsIm5ld0FydGljbGUiLCJkZWxldGVBcnRpY2xlIiwiZGVsZXRlT25lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZ3JhcGhxbC9yZXNvbHZlcnMvIiwic291cmNlcyI6WyJhcnRpY2xlUmVzb2x2ZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZm9ybWF0IH0gPSByZXF1aXJlKFwicGF0aFwiKTtcbmNvbnN0IEFydGljbGUgPSByZXF1aXJlKFwiLi4vLi4vZGF0YS9tb2RlbHMvYXJ0aWNsZVwiKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XG5cbmZ1bmN0aW9uIHZlcmlmeVRva2VuKHRva2VuLCBzZWNyZXQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0KTtcblxuICAgIHJldHVybiBkZWNvZGVkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIHJldHVybiBgJHtkYXl9LSR7bW9udGh9LSR7eWVhcn1gO1xuICB9XG5cbmNvbnN0IGFydGljbGVSZXNvbHZlcnMgPSB7XG4gIFF1ZXJ5OiB7XG4gICAgZ2V0QWxsUHVibGlzaGVkQXJ0aWNsZXM6IGFzeW5jIChfLCB7IGNhdGVnb3JpZXMgfSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhjYXRlZ29yaWVzKVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZXMgPSBhd2FpdCBBcnRpY2xlLmdldEFsbFB1Ymxpc2hlZEFydGljbGVzKGNhdGVnb3JpZXMpO1xuICAgICAgICByZXR1cm4gYXJ0aWNsZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBwdWJsaXNoZWQgYXJ0aWNsZXM6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRBcnRpY2xlQnlJZDogYXN5bmMgKF8sIHsgaWQgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZSA9IGF3YWl0IEFydGljbGUuZ2V0QXJ0aWNsZUJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gYXJ0aWNsZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIGFydGljbGUgYnkgSUQ6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRBcnRpY2xlc0J5RGF0ZTogYXN5bmMgKF8sIHsgZnJvbSwgdG8gfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZXMgPSBhd2FpdCBBcnRpY2xlLmdldEFydGljbGVzQnlEYXRlKGZyb20sIHRvKTtcbiAgICAgICAgcmV0dXJuIGFydGljbGVzO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgYXJ0aWNsZXMgYnkgZGF0ZTogXCIgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldEFsbFByb2plY3RzOiBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhcnRpY2xlcyA9IGF3YWl0IEFydGljbGUuZ2V0QWxsUHJvamVjdHMoKTtcbiAgICAgICAgcmV0dXJuIGFydGljbGVzO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHM6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRBbGxBcnRpY2xlczogYXN5bmMgKF8sIGFyZ3MsIGNvbnRleHQpID0+IHtcbiAgICAgICAgY29uc3Qge3Rva2VufSA9IGNvbnRleHQ7XG4gICAgICAgIFxuICAgICAgICBpZighdG9rZW4pe1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbiwgcHJvY2Vzcy5lbnYuU0VDUkVUKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZXMgPSBhd2FpdCBBcnRpY2xlLmdldEFsbEFydGljbGVzKCk7XG4gICAgICAgIHJldHVybiBhcnRpY2xlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIGFsbCBhcnRpY2xlczogXCIgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuICBNdXRhdGlvbjoge1xuICAgIGNyZWF0ZUFydGljbGU6IGFzeW5jIChfLCB7IGlucHV0IH0pID0+IHtcbiAgICAgIGlmIChpbnB1dC5pZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRBcnRpY2xlID0ge1xuICAgICAgICAgICAgdGl0bGU6IGlucHV0LnRpdGxlLFxuICAgICAgICAgICAgc3VtbWFyeTogaW5wdXQuc3VtbWFyeSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LmNvbnRlbnQsXG4gICAgICAgICAgICBpbWFnZVVybDogaW5wdXQuaW1hZ2VVcmwsXG4gICAgICAgICAgICBjYXRlZ29yaWVzOiBpbnB1dC5jYXRlZ29yaWVzLFxuICAgICAgICAgICAgcHVibGlzaGVkOiBpbnB1dC5wdWJsaXNoZWQsXG4gICAgICAgICAgICBwcm9qZWN0OiBpbnB1dC5wcm9qZWN0LFxuICAgICAgICAgICAgZGF0ZTogZm9ybWF0RGF0ZShuZXcgRGF0ZSgpKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXJ0aWNsZS51cGRhdGVPbmUoXG4gICAgICAgICAgICB7IF9pZDogaW5wdXQuaWQgfSxcbiAgICAgICAgICAgIHVwZGF0ZWRBcnRpY2xlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAocmVzcG9uc2Uubk1vZGlmaWVkID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBcnRpY2xlIG5vdCB1cGRhdGVkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgY29uc3QgYXJ0aWNsZSA9IGF3YWl0IEFydGljbGUuZ2V0QXJ0aWNsZUJ5SWQoaW5wdXQuaWQpO1xuICAgICAgICAgICAgcmV0dXJuIGFydGljbGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIHVwZGF0aW5nIGFydGljbGU6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld0FydGljbGUgPSB7XG4gICAgICAgICAgdGl0bGU6IGlucHV0LnRpdGxlLFxuICAgICAgICAgIHN1bW1hcnk6IGlucHV0LnN1bW1hcnksXG4gICAgICAgICAgY29udGVudDogaW5wdXQuY29udGVudCxcbiAgICAgICAgICBpbWFnZVVybDogaW5wdXQuaW1hZ2VVcmwsXG4gICAgICAgICAgY2F0ZWdvcmllczogaW5wdXQuY2F0ZWdvcmllcyxcbiAgICAgICAgICBwdWJsaXNoZWQ6IGlucHV0LnB1Ymxpc2hlZCxcbiAgICAgICAgICBwcm9qZWN0OiBpbnB1dC5wcm9qZWN0LFxuICAgICAgICAgIGRhdGU6IGZvcm1hdERhdGUobmV3IERhdGUoKSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXJ0aWNsZS5jcmVhdGVBcnRpY2xlKG5ld0FydGljbGUpO1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY3JlYXRpbmcgYXJ0aWNsZTogXCIgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgICBkZWxldGVBcnRpY2xlOiBhc3luYyAoXywgeyBpZCB9KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBcnRpY2xlLmRlbGV0ZU9uZSh7IF9pZDogaWQgfSk7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGRlbGV0aW5nIGFydGljbGU6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH0gXG4gIH0sXG4gXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFydGljbGVSZXNvbHZlcnM7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUE7QUFBRixJQUFhQyxPQUFPLENBQUMsTUFBRCxDQUExQjs7QUFDQSxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQywyQkFBRCxDQUF2Qjs7QUFDQSxNQUFNRSxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxjQUFELENBQW5COztBQUVBLFNBQVNHLFdBQVQsQ0FBcUJDLEtBQXJCLEVBQTRCQyxNQUE1QixFQUFvQztFQUNsQyxJQUFJO0lBQ0YsTUFBTUMsT0FBTyxHQUFHSixHQUFHLENBQUNLLE1BQUosQ0FBV0gsS0FBWCxFQUFrQkMsTUFBbEIsQ0FBaEI7SUFFQSxPQUFPQyxPQUFQO0VBQ0QsQ0FKRCxDQUlFLE9BQU9FLEtBQVAsRUFBYztJQUNkLE1BQU0sSUFBSUMsS0FBSixDQUFVRCxLQUFLLENBQUNFLE9BQWhCLENBQU47RUFDRDtBQUNGOztBQUVELFNBQVNDLFVBQVQsQ0FBb0JDLElBQXBCLEVBQTBCO0VBQ3RCLE1BQU1DLElBQUksR0FBR0QsSUFBSSxDQUFDRSxXQUFMLEVBQWI7RUFDQSxNQUFN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","map":{"version":3,"names":["format","require","Article","jwt","verifyToken","token","secret","decoded","verify","error","Error","message","formatDate","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","articleResolvers","Query","getAllPublishedArticles","_","categories","console","log","articles","getArticleById","id","article","getArticlesByDate","from","to","getAllProjects","getAllArticles","args","context","process","env","SECRET","Mutation","createArticle","input","updatedArticle","title","summary","content","imageUrl","published","project","Date","response","updateOne","_id","nModified","newArticle","deleteArticle","deleteOne","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["articleResolvers.js"],"sourcesContent":["const { format } = require(\"path\");\nconst Article = require(\"../../data/models/article\");\nconst jwt = require(\"jsonwebtoken\");\n\nfunction verifyToken(token, secret) {\n  try {\n    const decoded = jwt.verify(token, secret);\n\n    return decoded;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n\nfunction formatDate(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${day}-${month}-${year}`;\n  }\n\nconst articleResolvers = {\n  Query: {\n    getAllPublishedArticles: async (_, { categories }) => {\n        console.log(categories)\n      try {\n        const articles = await Article.getAllPublishedArticles(categories);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching published articles: \" + error.message);\n      }\n    },\n    getArticleById: async (_, { id }) => {\n      try {\n        const article = await Article.getArticleById(id);\n        return article;\n      } catch (error) {\n        throw new Error(\"Error fetching article by ID: \" + error.message);\n      }\n    },\n    getArticlesByDate: async (_, { from, to }) => {\n      try {\n        const articles = await Article.getArticlesByDate(from, to);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching articles by date: \" + error.message);\n      }\n    },\n    getAllProjects: async () => {\n      try {\n        const articles = await Article.getAllProjects();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching projects: \" + error.message);\n      }\n    },\n    getAllArticles: async (_, args, context) => {\n        const {token} = context;\n        \n        if(!token){\n            throw new Error('Authentication required');\n        }\n        const decoded = verifyToken(token, process.env.SECRET);\n      \n      try {\n        const articles = await Article.getAllArticles();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching all articles: \" + error.message);\n      }\n    },\n  },\n  Mutation: {\n    createArticle: async (_, { input }) => {\n      if (input.id) {\n        try {\n          const updatedArticle = {\n            title: input.title,\n            summary: input.summary,\n            content: input.content,\n            imageUrl: input.imageUrl,\n            categories: input.categories,\n            published: input.published,\n            project: input.project,\n            date: formatDate(new Date()),\n          };\n          const response = await Article.updateOne(\n            { _id: input.id },\n            updatedArticle\n          );\n          if (response.nModified === 0) {\n            throw new Error(\"Article not updated\");\n          }\n          else{\n            const article = await Article.getArticleById(input.id);\n            return article;\n          }\n          \n          \n        } catch (error) {\n          throw new Error(\"Error updating article: \" + error.message);\n        }\n      }\n      try {\n        const newArticle = {\n          title: input.title,\n          summary: input.summary,\n          content: input.content,\n          imageUrl: input.imageUrl,\n          categories: input.categories,\n          published: input.published,\n          project: input.project,\n          date: formatDate(new Date()),\n        };\n        const response = await Article.createArticle(newArticle);\n        console.log(response)\n        return response;\n      } catch (error) {\n        throw new Error(\"Error creating article: \" + error.message);\n      }\n    },\n     deleteArticle: async (_, { id }) => {\n        try {\n          const response = await Article.deleteOne({ _id: id });\n          return response;\n        } catch (error) {\n          throw new Error(\"Error deleting article: \" + error.message);\n        }\n      } \n  },\n \n};\n\nmodule.exports = articleResolvers;\n"],"mappings":"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"}},"mtime":1704914727166},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/article.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst articleSchema = new mongoose.Schema({\n  title: {\n    type: String,\n    required: true\n  },\n  summary: {\n    type: String,\n    required: true\n  },\n  content: {\n    type: String,\n    required: true\n  },\n  imageUrl: {\n    type: String,\n    required: true\n  },\n  date: {\n    type: String,\n    required: true\n  },\n  categories: {\n    type: [String],\n    required: false\n  },\n  published: {\n    type: Boolean,\n    required: true\n  },\n  project: {\n    type: Boolean,\n    required: true\n  }\n});\nconst Article = mongoose.model('Article', articleSchema);\n\nArticle.getAllPublishedArticles = async categories => {\n  if (categories.length > 0) {\n    try {\n      const articles = await Article.find({\n        published: true,\n        categories: {\n          $in: categories\n        }\n      });\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching published articles: ' + error.message);\n    }\n  } else {\n    try {\n      const articles = await Article.find({\n        published: true\n      });\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching published articles: ' + error.message);\n    }\n  }\n};\n\nArticle.getArticleById = async id => {\n  try {\n    const article = await Article.findOne({\n      _id: id\n    });\n    return article;\n  } catch (error) {\n    throw new Error('Error fetching article by ID: ' + error.message);\n  }\n};\n\nArticle.getArticlesByDate = async (from, to) => {\n  try {\n    const articles = await Article.find({\n      date: {\n        $gte: from,\n        $lte: to\n      }\n    });\n    return articles;\n  } catch (error) {\n    throw new Error('Error fetching articles by date range: ' + error.message);\n  }\n};\n\nArticle.getAllProjects = async () => {\n  try {\n    const articles = await Article.find({\n      project: true\n    });\n    return articles;\n  } catch (error) {\n    throw new Error('Error fetching project articles: ' + error.message);\n  }\n};\n\nArticle.getAllArticles = async () => {\n  try {\n    const articles = await Article.find({});\n    return articles;\n  } catch (error) {\n    throw new Error('Error fetching all articles: ' + error.message);\n  }\n};\n\nArticle.createArticle = async input => {\n  try {\n    const article = await Article.create(input);\n    return article;\n  } catch (error) {\n    throw new Error('Error creating article: ' + error.message);\n  }\n};\n\nmodule.exports = Article;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJhcnRpY2xlU2NoZW1hIiwiU2NoZW1hIiwidGl0bGUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJzdW1tYXJ5IiwiY29udGVudCIsImltYWdlVXJsIiwiZGF0ZSIsImNhdGVnb3JpZXMiLCJwdWJsaXNoZWQiLCJCb29sZWFuIiwicHJvamVjdCIsIkFydGljbGUiLCJtb2RlbCIsImdldEFsbFB1Ymxpc2hlZEFydGljbGVzIiwibGVuZ3RoIiwiYXJ0aWNsZXMiLCJmaW5kIiwiJGluIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJnZXRBcnRpY2xlQnlJZCIsImlkIiwiYXJ0aWNsZSIsImZpbmRPbmUiLCJfaWQiLCJnZXRBcnRpY2xlc0J5RGF0ZSIsImZyb20iLCJ0byIsIiRndGUiLCIkbHRlIiwiZ2V0QWxsUHJvamVjdHMiLCJnZXRBbGxBcnRpY2xlcyIsImNyZWF0ZUFydGljbGUiLCJpbnB1dCIsImNyZWF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjL2RhdGEvbW9kZWxzLyIsInNvdXJjZXMiOlsiYXJ0aWNsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbmNvbnN0IGFydGljbGVTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcblxuICAgIHRpdGxlOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgc3VtbWFyeTp7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGNvbnRlbnQ6e1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBpbWFnZVVybDp7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGRhdGU6e1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBjYXRlZ29yaWVzOntcbiAgICAgICAgdHlwZTogW1N0cmluZ10sXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgIH0sXG4gICAgcHVibGlzaGVkOntcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIHByb2plY3Q6e1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1cbn0pXG5cbmNvbnN0IEFydGljbGUgPSBtb25nb29zZS5tb2RlbCgnQXJ0aWNsZScsIGFydGljbGVTY2hlbWEpO1xuXG5BcnRpY2xlLmdldEFsbFB1Ymxpc2hlZEFydGljbGVzID0gYXN5bmMgKGNhdGVnb3JpZXMpID0+IHtcbiAgICBpZihjYXRlZ29yaWVzLmxlbmd0aD4gMCl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhcnRpY2xlcyA9IGF3YWl0IEFydGljbGUuZmluZCh7IHB1Ymxpc2hlZDogdHJ1ZSwgY2F0ZWdvcmllczogeyAkaW46IGNhdGVnb3JpZXMgfSB9KTtcbiAgICAgICAgICAgIHJldHVybiBhcnRpY2xlcztcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBmZXRjaGluZyBwdWJsaXNoZWQgYXJ0aWNsZXM6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXJ0aWNsZXMgPSBhd2FpdCBBcnRpY2xlLmZpbmQoeyBwdWJsaXNoZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICByZXR1cm4gYXJ0aWNsZXM7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZmV0Y2hpbmcgcHVibGlzaGVkIGFydGljbGVzOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgIH1cbn1cbiAgXG4gIEFydGljbGUuZ2V0QXJ0aWNsZUJ5SWQgPSBhc3luYyAoaWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXJ0aWNsZSA9IGF3YWl0IEFydGljbGUuZmluZE9uZSh7IF9pZDogaWQgfSk7XG4gICAgICByZXR1cm4gYXJ0aWNsZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBmZXRjaGluZyBhcnRpY2xlIGJ5IElEOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9O1xuICBcbiAgQXJ0aWNsZS5nZXRBcnRpY2xlc0J5RGF0ZSA9IGFzeW5jIChmcm9tLCB0bykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcnRpY2xlcyA9IGF3YWl0IEFydGljbGUuZmluZCh7IGRhdGU6IHsgJGd0ZTogZnJvbSwgJGx0ZTogdG8gfSB9KTtcbiAgICAgIHJldHVybiBhcnRpY2xlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBmZXRjaGluZyBhcnRpY2xlcyBieSBkYXRlIHJhbmdlOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9O1xuICBcbiAgQXJ0aWNsZS5nZXRBbGxQcm9qZWN0cyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXJ0aWNsZXMgPSBhd2FpdCBBcnRpY2xlLmZpbmQoeyBwcm9qZWN0OiB0cnVlIH0pO1xuICAgICAgcmV0dXJuIGFydGljbGVzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgYXJ0aWNsZXM6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gIFxuICBBcnRpY2xlLmdldEFsbEFydGljbGVzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcnRpY2xlcyA9IGF3YWl0IEFydGljbGUuZmluZCh7fSk7XG4gICAgICByZXR1cm4gYXJ0aWNsZXM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIGFydGljbGVzOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9O1xuICBcbiAgQXJ0aWNsZS5jcmVhdGVBcnRpY2xlID0gYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFydGljbGUgPSBhd2FpdCBBcnRpY2xlLmNyZWF0ZShpbnB1dCk7XG4gICAgICByZXR1cm4gYXJ0aWNsZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBjcmVhdGluZyBhcnRpY2xlOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9O1xuIG1vZHVsZS5leHBvcnRzID0gQXJ0aWNsZTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBeEI7O0FBRUEsTUFBTUMsYUFBYSxHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBYixDQUFvQjtFQUV0Q0MsS0FBSyxFQUFDO0lBQ0ZDLElBQUksRUFBRUMsTUFESjtJQUVGQyxRQUFRLEVBQUU7RUFGUixDQUZnQztFQU10Q0MsT0FBTyxFQUFDO0lBQ0pILElBQUksRUFBRUMsTUFERjtJQUVKQyxRQUFRLEVBQUU7RUFGTixDQU44QjtFQVV0Q0UsT0FBTyxFQUFDO0lBQ0pKLElBQUksRUFBRUMsTUFERjtJQUVKQyxRQUFRLEVBQUU7RUFGTixDQVY4QjtFQWN0Q0csUUFBUSxFQUFDO0lBQ0xMLElBQUksRUFB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","map":{"version":3,"names":["mongoose","require","articleSchema","Schema","title","type","String","required","summary","content","imageUrl","date","categories","published","Boolean","project","Article","model","getAllPublishedArticles","length","articles","find","$in","error","Error","message","getArticleById","id","article","findOne","_id","getArticlesByDate","from","to","$gte","$lte","getAllProjects","getAllArticles","createArticle","input","create","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/","sources":["article.js"],"sourcesContent":["const mongoose = require('mongoose');\n\nconst articleSchema = new mongoose.Schema({\n\n    title:{\n        type: String,\n        required: true\n    },\n    summary:{\n        type: String,\n        required: true\n    },\n    content:{\n        type: String,\n        required: true\n    },\n    imageUrl:{\n        type: String,\n        required: true\n    },\n    date:{\n        type: String,\n        required: true\n    },\n    categories:{\n        type: [String],\n        required: false\n    },\n    published:{\n        type: Boolean,\n        required: true\n    },\n    project:{\n        type: Boolean,\n        required: true\n    }\n})\n\nconst Article = mongoose.model('Article', articleSchema);\n\nArticle.getAllPublishedArticles = async (categories) => {\n    if(categories.length> 0){\n        try {\n            const articles = await Article.find({ published: true, categories: { $in: categories } });\n            return articles;\n          } catch (error) {\n            throw new Error('Error fetching published articles: ' + error.message);\n          }\n    }\n    else {\n        try {\n            const articles = await Article.find({ published: true });\n            return articles;\n          } catch (error) {\n            throw new Error('Error fetching published articles: ' + error.message);\n          }\n    }\n}\n  \n  Article.getArticleById = async (id) => {\n    try {\n      const article = await Article.findOne({ _id: id });\n      return article;\n    } catch (error) {\n      throw new Error('Error fetching article by ID: ' + error.message);\n    }\n  };\n  \n  Article.getArticlesByDate = async (from, to) => {\n    try {\n      const articles = await Article.find({ date: { $gte: from, $lte: to } });\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching articles by date range: ' + error.message);\n    }\n  };\n  \n  Article.getAllProjects = async () => {\n    try {\n      const articles = await Article.find({ project: true });\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching project articles: ' + error.message);\n    }\n  };\n  \n  Article.getAllArticles = async () => {\n    try {\n      const articles = await Article.find({});\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching all articles: ' + error.message);\n    }\n  };\n  \n  Article.createArticle = async (input) => {\n    try {\n      const article = await Article.create(input);\n      return article;\n    } catch (error) {\n      throw new Error('Error creating article: ' + error.message);\n    }\n  };\n module.exports = Article;"],"mappings":"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"}},"mtime":1704561627634},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/categoryResolvers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const Category = require('../../data/models/category');\n\nconst categoryResolvers = {\n  Query: {\n    getCategories: async () => {\n      try {\n        const categories = await Category.find({});\n        return categories;\n      } catch (error) {\n        throw new Error('Error fetching categories: ' + error.message);\n      }\n    }\n  },\n  Mutation: {\n    createCategory: async (_, {\n      categoryName\n    }) => {\n      try {\n        const newCategory = {\n          name: categoryName\n        };\n        const category = await Category.create(newCategory);\n        return category;\n      } catch (error) {\n        throw new Error('Error creating category: ' + error.message);\n      }\n    }\n  }\n};\nmodule.exports = categoryResolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDYXRlZ29yeSIsInJlcXVpcmUiLCJjYXRlZ29yeVJlc29sdmVycyIsIlF1ZXJ5IiwiZ2V0Q2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJmaW5kIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJNdXRhdGlvbiIsImNyZWF0ZUNhdGVnb3J5IiwiXyIsImNhdGVnb3J5TmFtZSIsIm5ld0NhdGVnb3J5IiwibmFtZSIsImNhdGVnb3J5IiwiY3JlYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZ3JhcGhxbC9yZXNvbHZlcnMvIiwic291cmNlcyI6WyJjYXRlZ29yeVJlc29sdmVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDYXRlZ29yeSA9IHJlcXVpcmUoJy4uLy4uL2RhdGEvbW9kZWxzL2NhdGVnb3J5Jyk7XG5cbmNvbnN0IGNhdGVnb3J5UmVzb2x2ZXJzID0ge1xuICAgIFF1ZXJ5OiB7XG4gICAgICBnZXRDYXRlZ29yaWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IGF3YWl0IENhdGVnb3J5LmZpbmQoe30pO1xuICAgICAgICAgIHJldHVybiBjYXRlZ29yaWVzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZmV0Y2hpbmcgY2F0ZWdvcmllczogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sXG4gICAgTXV0YXRpb246IHtcbiAgICAgICAgY3JlYXRlQ2F0ZWdvcnk6IGFzeW5jIChfLCB7IGNhdGVnb3J5TmFtZSB9KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjYXRlZ29yeU5hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgQ2F0ZWdvcnkuY3JlYXRlKG5ld0NhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0ZWdvcnk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYXRpbmcgY2F0ZWdvcnk6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2F0ZWdvcnlSZXNvbHZlcnM7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLDRCQUFELENBQXhCOztBQUVBLE1BQU1DLGlCQUFpQixHQUFHO0VBQ3RCQyxLQUFLLEVBQUU7SUFDTEMsYUFBYSxFQUFFLFlBQVk7TUFDekIsSUFBSTtRQUNGLE1BQU1DLFVBQVUsR0FBRyxNQUFNTCxRQUFRLENBQUNNLElBQVQsQ0FBYyxFQUFkLENBQXpCO1FBQ0EsT0FBT0QsVUFBUDtNQUNELENBSEQsQ0FHRSxPQUFPRSxLQUFQLEVBQWM7UUFDZCxNQUFNLElBQUlDLEtBQUosQ0FBVSxnQ0FBZ0NELEtBQUssQ0FBQ0UsT0FBaEQsQ0FBTjtNQUNEO0lBQ0Y7RUFSSSxDQURlO0VBV3RCQyxRQUFRLEVBQUU7SUFDTkMsY0FBYyxFQUFFLE9BQU9DLENBQVAsRUFBVTtNQUFFQztJQUFGLENBQVYsS0FBK0I7TUFDM0MsSUFBSTtRQUNBLE1BQU1DLFdBQVcsR0FBRztVQUNoQkMsSUFBSSxFQUFFRjtRQURVLENBQXBCO1FBR0EsTUFBTUcsUUFBUSxHQUFHLE1BQU1oQixRQUFRLENBQUNpQixNQUFULENBQWdCSCxXQUFoQixDQUF2QjtRQUNBLE9BQU9FLFFBQVA7TUFDSCxDQU5ELENBTUUsT0FBT1QsS0FBUCxFQUFjO1FBQ1osTUFBTSxJQUFJQyxLQUFKLENBQVUsOEJBQThCRCxLQUFLLENBQUNFLE9BQTlDLENBQU47TUFDSDtJQUNKO0VBWEs7QUFYWSxDQUExQjtBQTBCQVMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCakIsaUJBQWpCIn0=","map":{"version":3,"names":["Category","require","categoryResolvers","Query","getCategories","categories","find","error","Error","message","Mutation","createCategory","_","categoryName","newCategory","name","category","create","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["categoryResolvers.js"],"sourcesContent":["const Category = require('../../data/models/category');\n\nconst categoryResolvers = {\n    Query: {\n      getCategories: async () => {\n        try {\n          const categories = await Category.find({});\n          return categories;\n        } catch (error) {\n          throw new Error('Error fetching categories: ' + error.message);\n        }\n      },\n    },\n    Mutation: {\n        createCategory: async (_, { categoryName }) => {\n            try {\n                const newCategory = {\n                    name: categoryName,\n                }\n                const category = await Category.create(newCategory);\n                return category;\n            } catch (error) {\n                throw new Error('Error creating category: ' + error.message);\n            }\n        },\n    }\n}\n\nmodule.exports = categoryResolvers;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,4BAAD,CAAxB;;AAEA,MAAMC,iBAAiB,GAAG;EACtBC,KAAK,EAAE;IACLC,aAAa,EAAE,YAAY;MACzB,IAAI;QACF,MAAMC,UAAU,GAAG,MAAML,QAAQ,CAACM,IAAT,CAAc,EAAd,CAAzB;QACA,OAAOD,UAAP;MACD,CAHD,CAGE,OAAOE,KAAP,EAAc;QACd,MAAM,IAAIC,KAAJ,CAAU,gCAAgCD,KAAK,CAACE,OAAhD,CAAN;MACD;IACF;EARI,CADe;EAWtBC,QAAQ,EAAE;IACNC,cAAc,EAAE,OAAOC,CAAP,EAAU;MAAEC;IAAF,CAAV,KAA+B;MAC3C,IAAI;QACA,MAAMC,WAAW,GAAG;UAChBC,IAAI,EAAEF;QADU,CAApB;QAGA,MAAMG,QAAQ,GAAG,MAAMhB,QAAQ,CAACiB,MAAT,CAAgBH,WAAhB,CAAvB;QACA,OAAOE,QAAP;MACH,CAND,CAME,OAAOT,KAAP,EAAc;QACZ,MAAM,IAAIC,KAAJ,CAAU,8BAA8BD,KAAK,CAACE,OAA9C,CAAN;MACH;IACJ;EAXK;AAXY,CAA1B;AA0BAS,MAAM,CAACC,OAAP,GAAiBjB,iBAAjB"}},"mtime":1704486732316},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/category.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require(\"mongoose\");\n\nconst categorySchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: true\n  }\n});\nconst Category = mongoose.model('Category', categorySchema);\nmodule.exports = Category;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjYXRlZ29yeVNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJDYXRlZ29yeSIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZGF0YS9tb2RlbHMvIiwic291cmNlcyI6WyJjYXRlZ29yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuXG5cbmNvbnN0IGNhdGVnb3J5U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgbmFtZTp7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9XG59KTtcblxuY29uc3QgQ2F0ZWdvcnkgPSBtb25nb29zZS5tb2RlbCgnQ2F0ZWdvcnknLCBjYXRlZ29yeVNjaGVtYSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2F0ZWdvcnk7Il0sIm1hcHBpbmdzIjoiQUFDQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUdBLE1BQU1DLGNBQWMsR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQWIsQ0FBb0I7RUFDdkNDLElBQUksRUFBQztJQUNEQyxJQUFJLEVBQUVDLE1BREw7SUFFREMsUUFBUSxFQUFFO0VBRlQ7QUFEa0MsQ0FBcEIsQ0FBdkI7QUFPQSxNQUFNQyxRQUFRLEdBQUdSLFFBQVEsQ0FBQ1MsS0FBVCxDQUFlLFVBQWYsRUFBMkJQLGNBQTNCLENBQWpCO0FBRUFRLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsUUFBakIifQ==","map":{"version":3,"names":["mongoose","require","categorySchema","Schema","name","type","String","required","Category","model","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/","sources":["category.js"],"sourcesContent":["\nconst mongoose = require(\"mongoose\");\n\n\nconst categorySchema = new mongoose.Schema({\n    name:{\n        type: String,\n        required: true\n    }\n});\n\nconst Category = mongoose.model('Category', categorySchema);\n\nmodule.exports = Category;"],"mappings":"AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAGA,MAAMC,cAAc,GAAG,IAAIF,QAAQ,CAACG,MAAb,CAAoB;EACvCC,IAAI,EAAC;IACDC,IAAI,EAAEC,MADL;IAEDC,QAAQ,EAAE;EAFT;AADkC,CAApB,CAAvB;AAOA,MAAMC,QAAQ,GAAGR,QAAQ,CAACS,KAAT,CAAe,UAAf,EAA2BP,cAA3B,CAAjB;AAEAQ,MAAM,CAACC,OAAP,GAAiBH,QAAjB"}},"mtime":1704486739608},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/userResolvers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const User = require(\"../../data/models/user\");\n\nconst jwt = require(\"jsonwebtoken\");\n\nconst createToken = user => {\n  const token = jwt.sign({\n    username: user.username,\n    id: user.id\n  }, process.env.SECRET, {\n    expiresIn: \"1d\"\n  });\n  return token;\n};\n\nconst userResolvers = {\n  Query: {},\n  Mutation: {\n    createUser: async (_, {\n      input\n    }, {\n      res\n    }) => {\n      try {\n        const newUser = {\n          username: input.username,\n          firstName: input.firstName,\n          lastName: input.lastName,\n          password: input.password\n        };\n        const user = await User.createUser(newUser);\n        token = createToken(user);\n        res.cookie(\"token\", token, {\n          httpOnly: true,\n          secure: true,\n          // use secure in production\n          sameSite: \"lax\",\n          maxAge: 24 * 60 * 60 * 1000,\n          // 1 day\n          path: \"/\"\n        });\n        return {\n          token: token\n        };\n      } catch (error) {\n        throw new Error(\"Error creating user: \" + error.message);\n      }\n    },\n    login: async (_, {\n      username,\n      password\n    }, {\n      res\n    }) => {\n      try {\n        console.log(username);\n        const user = await User.findOne({\n          username: username\n        });\n        console.log(user);\n\n        if (user && User.verifyPassword(password, user.password)) {\n          token = createToken(user);\n          res.cookie(\"token\", token, {\n            httpOnly: true,\n            secure: true,\n            // use secure in production\n            sameSite: \"none\",\n            maxAge: 24 * 60 * 60 * 1000,\n            // 1 day\n            path: \"/\"\n          });\n          return {\n            token: token\n          };\n        } else {\n          throw new Error(\"Wrong password\");\n        }\n      } catch (error) {\n        throw new Error(\"Error fetching users: \" + error.message);\n      }\n    }\n  }\n};\nmodule.exports = userResolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsImp3dCIsImNyZWF0ZVRva2VuIiwidXNlciIsInRva2VuIiwic2lnbiIsInVzZXJuYW1lIiwiaWQiLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUIiwiZXhwaXJlc0luIiwidXNlclJlc29sdmVycyIsIlF1ZXJ5IiwiTXV0YXRpb24iLCJjcmVhdGVVc2VyIiwiXyIsImlucHV0IiwicmVzIiwibmV3VXNlciIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicGFzc3dvcmQiLCJjb29raWUiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwibWF4QWdlIiwicGF0aCIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwibG9naW4iLCJjb25zb2xlIiwibG9nIiwiZmluZE9uZSIsInZlcmlmeVBhc3N3b3JkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZ3JhcGhxbC9yZXNvbHZlcnMvIiwic291cmNlcyI6WyJ1c2VyUmVzb2x2ZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vLi4vZGF0YS9tb2RlbHMvdXNlclwiKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XG5cbmNvbnN0IGNyZWF0ZVRva2VuID0gKHVzZXIpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICB7IHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLCBpZDogdXNlci5pZCB9LFxuICAgIHByb2Nlc3MuZW52LlNFQ1JFVCxcbiAgICB7IGV4cGlyZXNJbjogXCIxZFwiIH1cbiAgKTtcbiAgcmV0dXJuIHRva2VuO1xufTtcblxuY29uc3QgdXNlclJlc29sdmVycyA9IHtcbiAgUXVlcnk6IHt9LFxuICBNdXRhdGlvbjoge1xuICAgIGNyZWF0ZVVzZXI6IGFzeW5jIChfLCB7IGlucHV0IH0sIHsgcmVzIH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICAgICAgdXNlcm5hbWU6IGlucHV0LnVzZXJuYW1lLFxuICAgICAgICAgIGZpcnN0TmFtZTogaW5wdXQuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBpbnB1dC5sYXN0TmFtZSxcbiAgICAgICAgICBwYXNzd29yZDogaW5wdXQucGFzc3dvcmQsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlVXNlcihuZXdVc2VyKTtcbiAgICAgICAgdG9rZW4gPSBjcmVhdGVUb2tlbih1c2VyKTtcbiAgICAgICAgcmVzLmNvb2tpZShcInRva2VuXCIsIHRva2VuLCB7XG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLCAvLyB1c2Ugc2VjdXJlIGluIHByb2R1Y3Rpb25cbiAgICAgICAgICBzYW1lU2l0ZTogXCJsYXhcIixcbiAgICAgICAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCAqIDEwMDAsIC8vIDEgZGF5XG4gICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgIH0pOyBcbiAgICAgICAgcmV0dXJuIHsgdG9rZW46IHRva2VuIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBjcmVhdGluZyB1c2VyOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbG9naW46IGFzeW5jIChfLCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9LCB7IHJlcyB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyh1c2VybmFtZSk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogdXNlcm5hbWUgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgICAgICBpZiAodXNlciAmJiBVc2VyLnZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKSkge1xuICAgICAgICAgIHRva2VuID0gY3JlYXRlVG9rZW4odXNlcik7XG4gICAgICAgICAgIHJlcy5jb29raWUoXCJ0b2tlblwiLCB0b2tlbiwge1xuICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICBzZWN1cmU6IHRydWUsIC8vIHVzZSBzZWN1cmUgaW4gcHJvZHVjdGlvblxuICAgICAgICAgICAgc2FtZVNpdGU6IFwibm9uZVwiLFxuICAgICAgICAgICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLCAvLyAxIGRheVxuICAgICAgICAgICAgcGF0aDogXCIvXCIsXG4gICAgICAgICAgfSk7ICBcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4geyB0b2tlbjogdG9rZW4gfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcm9uZyBwYXNzd29yZFwiKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXNlcnM6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdXNlclJlc29sdmVycztcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsd0JBQUQsQ0FBcEI7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsY0FBRCxDQUFuQjs7QUFFQSxNQUFNRSxXQUFXLEdBQUlDLElBQUQsSUFBVTtFQUM1QixNQUFNQyxLQUFLLEdBQUdILEdBQUcsQ0FBQ0ksSUFBSixDQUNaO0lBQUVDLFFBQVEsRUFBRUgsSUFBSSxDQUFDRyxRQUFqQjtJQUEyQkMsRUFBRSxFQUFFSixJQUFJLENBQUNJO0VBQXBDLENBRFks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","map":{"version":3,"names":["User","require","jwt","createToken","user","token","sign","username","id","process","env","SECRET","expiresIn","userResolvers","Query","Mutation","createUser","_","input","res","newUser","firstName","lastName","password","cookie","httpOnly","secure","sameSite","maxAge","path","error","Error","message","login","console","log","findOne","verifyPassword","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["userResolvers.js"],"sourcesContent":["const User = require(\"../../data/models/user\");\nconst jwt = require(\"jsonwebtoken\");\n\nconst createToken = (user) => {\n  const token = jwt.sign(\n    { username: user.username, id: user.id },\n    process.env.SECRET,\n    { expiresIn: \"1d\" }\n  );\n  return token;\n};\n\nconst userResolvers = {\n  Query: {},\n  Mutation: {\n    createUser: async (_, { input }, { res }) => {\n      try {\n        const newUser = {\n          username: input.username,\n          firstName: input.firstName,\n          lastName: input.lastName,\n          password: input.password,\n        };\n\n        const user = await User.createUser(newUser);\n        token = createToken(user);\n        res.cookie(\"token\", token, {\n          httpOnly: true,\n          secure: true, // use secure in production\n          sameSite: \"lax\",\n          maxAge: 24 * 60 * 60 * 1000, // 1 day\n          path: \"/\",\n        }); \n        return { token: token };\n      } catch (error) {\n        throw new Error(\"Error creating user: \" + error.message);\n      }\n    },\n    login: async (_, { username, password }, { res }) => {\n      try {\n        console.log(username);\n        const user = await User.findOne({ username: username });\n        console.log(user);\n        if (user && User.verifyPassword(password, user.password)) {\n          token = createToken(user);\n           res.cookie(\"token\", token, {\n            httpOnly: true,\n            secure: true, // use secure in production\n            sameSite: \"none\",\n            maxAge: 24 * 60 * 60 * 1000, // 1 day\n            path: \"/\",\n          });  \n          \n          return { token: token };\n        } else {\n          throw new Error(\"Wrong password\");\n        }\n      } catch (error) {\n        throw new Error(\"Error fetching users: \" + error.message);\n      }\n    },\n  },\n};\n\nmodule.exports = userResolvers;\n"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,wBAAD,CAApB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,cAAD,CAAnB;;AAEA,MAAME,WAAW,GAAIC,IAAD,IAAU;EAC5B,MAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CACZ;IAAEC,QAAQ,EAAEH,IAAI,CAACG,QAAjB;IAA2BC,EAAE,EAAEJ,IAAI,CAACI;EAApC,CADY,EAEZC,OAAO,CAACC,GAAR,CAAYC,MAFA,EAGZ;IAAEC,SAAS,EAAE;EAAb,CAHY,CAAd;EAKA,OAAOP,KAAP;AACD,CAPD;;AASA,MAAMQ,aAAa,GAAG;EACpBC,KAAK,EAAE,EADa;EAEpBC,QAAQ,EAAE;IACRC,UAAU,EAAE,OAAOC,CAAP,EAAU;MAAEC;IAAF,CAAV,EAAqB;MAAEC;IAAF,CAArB,KAAiC;MAC3C,IAAI;QACF,MAAMC,OAAO,GAAG;UACdb,QAAQ,EAAEW,KAAK,CAACX,QADF;UAEdc,SAAS,EAAEH,KAAK,CAACG,SAFH;UAGdC,QAAQ,EAAEJ,KAAK,CAACI,QAHF;UAIdC,QAAQ,EAAEL,KAAK,CAACK;QAJF,CAAhB;QAOA,MAAMnB,IAAI,GAAG,MAAMJ,IAAI,CAACgB,UAAL,CAAgBI,OAAhB,CAAnB;QACAf,KAAK,GAAGF,WAAW,CAACC,IAAD,CAAnB;QACAe,GAAG,CAACK,MAAJ,CAAW,OAAX,EAAoBnB,KAApB,EAA2B;UACzBoB,QAAQ,EAAE,IADe;UAEzBC,MAAM,EAAE,IAFiB;UAEX;UACdC,QAAQ,EAAE,KAHe;UAIzBC,MAAM,EAAE,KAAK,EAAL,GAAU,EAAV,GAAe,IAJE;UAII;UAC7BC,IAAI,EAAE;QALmB,CAA3B;QAOA,OAAO;UAAExB,KAAK,EAAEA;QAAT,CAAP;MACD,CAlBD,CAkBE,OAAOyB,KAAP,EAAc;QACd,MAAM,IAAIC,KAAJ,CAAU,0BAA0BD,KAAK,CAACE,OAA1C,CAAN;MACD;IACF,CAvBO;IAwBRC,KAAK,EAAE,OAAOhB,CAAP,EAAU;MAAEV,QAAF;MAAYgB;IAAZ,CAAV,EAAkC;MAAEJ;IAAF,CAAlC,KAA8C;MACnD,IAAI;QACFe,OAAO,CAACC,GAAR,CAAY5B,QAAZ;QACA,MAAMH,IAAI,GAAG,MAAMJ,IAAI,CAACoC,OAAL,CAAa;UAAE7B,QAAQ,EAAEA;QAAZ,CAAb,CAAnB;QACA2B,OAAO,CAACC,GAAR,CAAY/B,IAAZ;;QACA,IAAIA,IAAI,IAAIJ,IAAI,CAACqC,cAAL,CAAoBd,QAApB,EAA8BnB,IAAI,CAACmB,QAAnC,CAAZ,EAA0D;UACxDlB,KAAK,GAAGF,WAAW,CAACC,IAAD,CAAnB;UACCe,GAAG,CAACK,MAAJ,CAAW,OAAX,EAAoBnB,KAApB,EAA2B;YAC1BoB,QAAQ,EAAE,IADgB;YAE1BC,MAAM,EAAE,IAFkB;YAEZ;YACdC,QAAQ,EAAE,MAHgB;YAI1BC,MAAM,EAAE,KAAK,EAAL,GAAU,EAAV,GAAe,IAJG;YAIG;YAC7BC,IAAI,EAAE;UALoB,CAA3B;UAQD,OAAO;YAAExB,KAAK,EAAEA;UAAT,CAAP;QACD,CAXD,MAWO;UACL,MAAM,IAAI0B,KAAJ,CAAU,gBAAV,CAAN;QACD;MACF,CAlBD,CAkBE,OAAOD,KAAP,EAAc;QACd,MAAM,IAAIC,KAAJ,CAAU,2BAA2BD,KAAK,CAACE,OAA3C,CAAN;MACD;IACF;EA9CO;AAFU,CAAtB;AAoDAM,MAAM,CAACC,OAAP,GAAiB1B,aAAjB"}},"mtime":1705167272544},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst bcrypt = require('bcrypt');\n\nconst userSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    required: true\n  },\n  firstName: {\n    type: String,\n    required: false\n  },\n  lastName: {\n    type: String,\n    required: false\n  },\n  password: {\n    type: String,\n    required: true\n  }\n});\nconst User = mongoose.model('User', userSchema);\n\nUser.createUser = async newUser => {\n  try {\n    const user = new User({\n      username: newUser.username,\n      firstName: newUser.firstName,\n      lastName: newUser.lastName,\n      password: await User.generatePassword(newUser.password)\n    });\n    const response = await user.save();\n    return response;\n  } catch (error) {\n    throw new Error('Error creating user: ' + error.message);\n  }\n};\n\nUser.verifyPassword = async (password, hash) => {\n  const match = await bcrypt.compare(password, hash);\n  return match;\n};\n\nUser.generatePassword = async password => {\n  const saltRounds = 10;\n  const hash = await bcrypt.hash(password, saltRounds);\n  return hash;\n};\n\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJiY3J5cHQiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBhc3N3b3JkIiwiVXNlciIsIm1vZGVsIiwiY3JlYXRlVXNlciIsIm5ld1VzZXIiLCJ1c2VyIiwiZ2VuZXJhdGVQYXNzd29yZCIsInJlc3BvbnNlIiwic2F2ZSIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwidmVyaWZ5UGFzc3dvcmQiLCJoYXNoIiwibWF0Y2giLCJjb21wYXJlIiwic2FsdFJvdW5kcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjL2RhdGEvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcblxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHVzZXJuYW1lOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgZmlyc3ROYW1lOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICB9LFxuICAgIGxhc3ROYW1lOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICB9LFxuICAgIHBhc3N3b3JkOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1cbn0pO1xuXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcblxuVXNlci5jcmVhdGVVc2VyID0gYXN5bmMgKG5ld1VzZXIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IG5ld1VzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBuZXdVc2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogbmV3VXNlci5sYXN0TmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBhd2FpdCBVc2VyLmdlbmVyYXRlUGFzc3dvcmQobmV3VXNlci5wYXNzd29yZClcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbn1cblxuVXNlci52ZXJpZnlQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCwgaGFzaCkgPT4ge1xuICAgIGNvbnN0IG1hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpO1xuICAgIHJldHVybiBtYXRjaDtcbn1cblxuVXNlci5nZW5lcmF0ZVBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkKSA9PiB7XG4gICAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XG4gICAgcmV0dXJuIGhhc2g7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVXNlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxRQUFELENBQXRCOztBQUVBLE1BQU1FLFVBQVUsR0FBRyxJQUFJSCxRQUFRLENBQUNJLE1BQWIsQ0FBb0I7RUFDbkNDLFFBQVEsRUFBQztJQUNMQyxJQUFJLEVBQUVDLE1BREQ7SUFFTEMsUUFBUSxFQUFFO0VBRkwsQ0FEMEI7RUFLbkNDLFNBQVMsRUFBQztJQUNOSCxJQUFJLEVBQUVDLE1BREE7SUFFTkMsUUFBUSxFQUFFO0VBRkosQ0FMeUI7RUFTbkNFLFFBQVEsRUFBQztJQUNMSixJQUFJLEVBQUVDLE1BREQ7SUFFTEMsUUFBUSxFQUFFO0VBRkwsQ0FUMEI7RUFhbkNHLFFBQVEsRUFBQztJQUNMTCxJQUFJLEVBQUVDLE1BREQ7SUFFTEMsUUFBUSxFQUFFO0VBRkw7QUFiMEIsQ0FBcEIsQ0FBbkI7QUFtQkEsTUFBTUksSUFBSSxHQUFHWixRQUFRLENBQUNhLEtBQVQsQ0FBZSxNQUFmLEVBQXVCVixVQUF2QixDQUFiOztBQUVBUyxJQUFJLENBQUNFLFVBQUwsR0FBa0IsTUFBT0MsT0FBUCxJQUFtQjtFQUNqQyxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLElBQUlKLElBQUosQ0FDVDtNQUNJUCxRQUFRLEVBQUVVLE9BQU8sQ0FBQ1YsUUFEdEI7TUFFSUksU0FBUyxFQUFFTSxPQUFPLENBQUNOLFNBRnZCO01BR0lDLFFBQVEsRUFBRUssT0FBTyxDQUFDTCxRQUh0QjtNQUlBQyxRQUFRLEVBQUUsTUFBTUMsSUFBSSxDQUFDSyxnQkFBTCxDQUFzQkYsT0FBTyxDQUFDSixRQUE5QjtJQUpoQixDQURTLENBQWI7SUFPQSxNQUFNTyxRQUFRLEdBQUcsTUFBTUYsSUFBSSxDQUFDRyxJQUFMLEVBQXZCO0lBQ0EsT0FBT0QsUUFBUDtFQUNILENBVkQsQ0FVRSxPQUFPRSxLQUFQLEVBQWM7SUFDWixNQUFNLElBQUlDLEtBQUosQ0FBVSwwQkFBMEJELEtBQUssQ0FBQ0UsT0FBMUMsQ0FBTjtFQUNIO0FBQ0osQ0FkRDs7QUFnQkFWLElBQUksQ0FBQ1csY0FBTCxHQUFzQixPQUFPWixRQUFQLEVBQWlCYSxJQUFqQixLQUEwQjtFQUM1QyxNQUFNQyxLQUFLLEdBQUcsTUFBTXZCLE1BQU0sQ0FBQ3dCLE9BQVAsQ0FBZWYsUUFBZixFQUF5QmEsSUFBekIsQ0FBcEI7RUFDQSxPQUFPQyxLQUFQO0FBQ0gsQ0FIRDs7QUFLQWIsSUFBSSxDQUFDSyxnQkFBTCxHQUF3QixNQUFPTixRQUFQLElBQW9CO0VBQ3hDLE1BQU1nQixVQUFVLEdBQUcsRUFBbkI7RUFDQSxNQUFNSCxJQUFJLEdBQUcsTUFBTXRCLE1BQU0sQ0FBQ3NCLElBQVAsQ0FBWWIsUUFBWixFQUFzQmdCLFVBQXRCLENBQW5CO0VBQ0EsT0FBT0gsSUFBUDtBQUNILENBSkQ7O0FBTUFJLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmpCLElBQWpCIn0=","map":{"version":3,"names":["mongoose","require","bcrypt","userSchema","Schema","username","type","String","required","firstName","lastName","password","User","model","createUser","newUser","user","generatePassword","response","save","error","Error","message","verifyPassword","hash","match","compare","saltRounds","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/","sources":["user.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst bcrypt = require('bcrypt');\n\nconst userSchema = new mongoose.Schema({\n    username:{\n        type: String,\n        required: true\n    },\n    firstName:{\n        type: String,\n        required: false\n    },\n    lastName:{\n        type: String,\n        required: false\n    },\n    password:{\n        type: String,\n        required: true\n    }\n});\n\nconst User = mongoose.model('User', userSchema);\n\nUser.createUser = async (newUser) => {\n    try {\n        const user = new User(\n            {\n                username: newUser.username,\n                firstName: newUser.firstName,\n                lastName: newUser.lastName,\n            password: await User.generatePassword(newUser.password)\n        })\n        const response = await user.save();\n        return response;\n    } catch (error) {\n        throw new Error('Error creating user: ' + error.message);\n    }\n}\n\nUser.verifyPassword = async (password, hash) => {\n    const match = await bcrypt.compare(password, hash);\n    return match;\n}\n\nUser.generatePassword = async (password) => {\n    const saltRounds = 10;\n    const hash = await bcrypt.hash(password, saltRounds);\n    return hash;\n}\n\nmodule.exports = User;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAME,UAAU,GAAG,IAAIH,QAAQ,CAACI,MAAb,CAAoB;EACnCC,QAAQ,EAAC;IACLC,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL,CAD0B;EAKnCC,SAAS,EAAC;IACNH,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE;EAFJ,CALyB;EASnCE,QAAQ,EAAC;IACLJ,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL,CAT0B;EAanCG,QAAQ,EAAC;IACLL,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL;AAb0B,CAApB,CAAnB;AAmBA,MAAMI,IAAI,GAAGZ,QAAQ,CAACa,KAAT,CAAe,MAAf,EAAuBV,UAAvB,CAAb;;AAEAS,IAAI,CAACE,UAAL,GAAkB,MAAOC,OAAP,IAAmB;EACjC,IAAI;IACA,MAAMC,IAAI,GAAG,IAAIJ,IAAJ,CACT;MACIP,QAAQ,EAAEU,OAAO,CAACV,QADtB;MAEII,SAAS,EAAEM,OAAO,CAACN,SAFvB;MAGIC,QAAQ,EAAEK,OAAO,CAACL,QAHtB;MAIAC,QAAQ,EAAE,MAAMC,IAAI,CAACK,gBAAL,CAAsBF,OAAO,CAACJ,QAA9B;IAJhB,CADS,CAAb;IAOA,MAAMO,QAAQ,GAAG,MAAMF,IAAI,CAACG,IAAL,EAAvB;IACA,OAAOD,QAAP;EACH,CAVD,CAUE,OAAOE,KAAP,EAAc;IACZ,MAAM,IAAIC,KAAJ,CAAU,0BAA0BD,KAAK,CAACE,OAA1C,CAAN;EACH;AACJ,CAdD;;AAgBAV,IAAI,CAACW,cAAL,GAAsB,OAAOZ,QAAP,EAAiBa,IAAjB,KAA0B;EAC5C,MAAMC,KAAK,GAAG,MAAMvB,MAAM,CAACwB,OAAP,CAAef,QAAf,EAAyBa,IAAzB,CAApB;EACA,OAAOC,KAAP;AACH,CAHD;;AAKAb,IAAI,CAACK,gBAAL,GAAwB,MAAON,QAAP,IAAoB;EACxC,MAAMgB,UAAU,GAAG,EAAnB;EACA,MAAMH,IAAI,GAAG,MAAMtB,MAAM,CAACsB,IAAP,CAAYb,QAAZ,EAAsBgB,UAAtB,CAAnB;EACA,OAAOH,IAAP;AACH,CAJD;;AAMAI,MAAM,CAACC,OAAP,GAAiBjB,IAAjB"}},"mtime":1704538071912},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/connectors.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require(\"mongoose\");\n\nconst DATABASE_URI = process.env.MONGODB_URI;\nconsole.log(DATABASE_URI);\nconst DATABASE_OPTIONS = {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n};\nmongoose.connect(DATABASE_URI, DATABASE_OPTIONS).then(() => {\n  console.log('Connected to MongoDB');\n}).catch(error => {\n  console.error(\"Error connecting to MongoDB:\", error);\n});\nmodule.exports = mongoose.connection;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJEQVRBQkFTRV9VUkkiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJjb25zb2xlIiwibG9nIiwiREFUQUJBU0VfT1BUSU9OUyIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3QiLCJ0aGVuIiwiY2F0Y2giLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb25uZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamFtZXNzdG9yci9Qcm9qZWN0cy9Qb3J0Zm9saW8vcG9ydGZvbGlvLXNlcnZpY2VzL3NyYy9kYXRhLyIsInNvdXJjZXMiOlsiY29ubmVjdG9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuXG5cbmNvbnN0IERBVEFCQVNFX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuY29uc29sZS5sb2coREFUQUJBU0VfVVJJKTtcbmNvbnN0IERBVEFCQVNFX09QVElPTlMgPSB7XG4gIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxufTtcblxubW9uZ29vc2VcbiAgLmNvbm5lY3QoREFUQUJBU0VfVVJJLCBEQVRBQkFTRV9PUFRJT05TKVxuICAudGhlbigoKSA9PiB7IFxuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gTW9uZ29EQicpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNvbm5lY3RpbmcgdG8gTW9uZ29EQjpcIiwgZXJyb3IpO1xuICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5jb25uZWN0aW9uOyJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFHQSxNQUFNQyxZQUFZLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFqQztBQUNBQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUwsWUFBWjtBQUNBLE1BQU1NLGdCQUFnQixHQUFHO0VBQ3ZCQyxlQUFlLEVBQUUsSUFETTtFQUV2QkMsa0JBQWtCLEVBQUU7QUFGRyxDQUF6QjtBQUtBVixRQUFRLENBQ0xXLE9BREgsQ0FDV1QsWUFEWCxFQUN5Qk0sZ0JBRHpCLEVBRUdJLElBRkgsQ0FFUSxNQUFNO0VBQ1ZOLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHNCQUFaO0FBQ0QsQ0FKSCxFQUtHTSxLQUxILENBS1VDLEtBQUQsSUFBVztFQUNoQlIsT0FBTyxDQUFDUSxLQUFSLENBQWMsOEJBQWQsRUFBOENBLEtBQTlDO0FBQ0QsQ0FQSDtBQVNBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJoQixRQUFRLENBQUNpQixVQUExQiJ9","map":{"version":3,"names":["mongoose","require","DATABASE_URI","process","env","MONGODB_URI","console","log","DATABASE_OPTIONS","useNewUrlParser","useUnifiedTopology","connect","then","catch","error","module","exports","connection"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/","sources":["connectors.js"],"sourcesContent":["\nconst mongoose = require(\"mongoose\");\n\n\nconst DATABASE_URI = process.env.MONGODB_URI;\nconsole.log(DATABASE_URI);\nconst DATABASE_OPTIONS = {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n};\n\nmongoose\n  .connect(DATABASE_URI, DATABASE_OPTIONS)\n  .then(() => { \n    console.log('Connected to MongoDB');\n  })\n  .catch((error) => {\n    console.error(\"Error connecting to MongoDB:\", error);\n  });\n\nmodule.exports = mongoose.connection;"],"mappings":"AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAGA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYC,WAAjC;AACAC,OAAO,CAACC,GAAR,CAAYL,YAAZ;AACA,MAAMM,gBAAgB,GAAG;EACvBC,eAAe,EAAE,IADM;EAEvBC,kBAAkB,EAAE;AAFG,CAAzB;AAKAV,QAAQ,CACLW,OADH,CACWT,YADX,EACyBM,gBADzB,EAEGI,IAFH,CAEQ,MAAM;EACVN,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,CAJH,EAKGM,KALH,CAKUC,KAAD,IAAW;EAChBR,OAAO,CAACQ,KAAR,CAAc,8BAAd,EAA8CA,KAA9C;AACD,CAPH;AASAC,MAAM,CAACC,OAAP,GAAiBhB,QAAQ,CAACiB,UAA1B"}},"mtime":1704709017920}}