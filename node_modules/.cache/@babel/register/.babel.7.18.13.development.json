{"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const express = require('express');\n\nrequire('dotenv').config();\n\nconst {\n  ApolloServer\n} = require('apollo-server-express');\n\nconst typeDefs = require('./graphql/schema');\n\nconst resolvers = require('./graphql/resolvers');\n\nconst dbconnection = require('./data/connectors');\n\nconst cors = require('cors');\n\nconst cookieParser = require('cookie-parser');\n\nconst app = express();\napp.use((req, res, next) => {\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  next();\n});\nconst corsOptions = {\n  origin: ['https://studio.apollographql.com', 'http://localhost:3000'],\n  credentials: true\n};\napp.use(cors(corsOptions));\napp.use(cookieParser());\n\nasync function startApolloServer() {\n  const server = new ApolloServer({\n    typeDefs,\n    resolvers,\n    context: async ({\n      req,\n      res\n    }) => {\n      const token = req.cookies['token'] || '';\n      return {\n        token,\n        res\n      };\n    }\n  });\n  await server.start(); // Ensure the server is started before applying middleware\n\n  server.applyMiddleware({\n    app,\n    path: '/graphql',\n    cors: corsOptions\n  });\n  const port = process.env.PORT || 8181;\n  app.listen({\n    port: port\n  }, () => {\n    console.log(`Apollo Server on port ${port}/graphql`);\n  });\n}\n\nstartApolloServer().catch(error => {\n  console.error('Error starting Apollo Server:', error);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvbmZpZyIsIkFwb2xsb1NlcnZlciIsInR5cGVEZWZzIiwicmVzb2x2ZXJzIiwiZGJjb25uZWN0aW9uIiwiY29ycyIsImNvb2tpZVBhcnNlciIsImFwcCIsInVzZSIsInJlcSIsInJlcyIsIm5leHQiLCJzZXRIZWFkZXIiLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsImNyZWRlbnRpYWxzIiwic3RhcnRBcG9sbG9TZXJ2ZXIiLCJzZXJ2ZXIiLCJjb250ZXh0IiwidG9rZW4iLCJjb29raWVzIiwic3RhcnQiLCJhcHBseU1pZGRsZXdhcmUiLCJwYXRoIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyb3IiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuY29uc3QgeyBBcG9sbG9TZXJ2ZXIgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcycpO1xuY29uc3QgdHlwZURlZnMgPSByZXF1aXJlKCcuL2dyYXBocWwvc2NoZW1hJyk7XG5jb25zdCByZXNvbHZlcnMgPSByZXF1aXJlKCcuL2dyYXBocWwvcmVzb2x2ZXJzJyk7XG5jb25zdCBkYmNvbm5lY3Rpb24gPSByZXF1aXJlKCcuL2RhdGEvY29ubmVjdG9ycycpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IGNvb2tpZVBhcnNlciA9IHJlcXVpcmUoJ2Nvb2tpZS1wYXJzZXInKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXMuc2V0SGVhZGVyKCdYLUNvbnRlbnQtVHlwZS1PcHRpb25zJywgJ25vc25pZmYnKTtcbiAgbmV4dCgpO1xufSk7XG5cblxuY29uc3QgY29yc09wdGlvbnMgPSB7XG4gIG9yaWdpbjogWydodHRwczovL3N0dWRpby5hcG9sbG9ncmFwaHFsLmNvbScsICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXSxcbiAgY3JlZGVudGlhbHM6IHRydWUsXG59O1xuXG5hcHAudXNlKGNvcnMoY29yc09wdGlvbnMpKTtcbmFwcC51c2UoY29va2llUGFyc2VyKCkpO1xuXG5hc3luYyBmdW5jdGlvbiBzdGFydEFwb2xsb1NlcnZlcigpIHtcbiAgY29uc3Qgc2VydmVyID0gbmV3IEFwb2xsb1NlcnZlcih7IFxuICAgIHR5cGVEZWZzLCBcbiAgICByZXNvbHZlcnMsXG4gICAgY29udGV4dDogYXN5bmMgKHsgcmVxLCByZXMgfSkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llc1sndG9rZW4nXSB8fCAnJztcbiAgICAgIHJldHVybiB7IHRva2VuLCByZXMgfTtcbiAgICB9LFxuICB9KTtcblxuICBhd2FpdCBzZXJ2ZXIuc3RhcnQoKTsgLy8gRW5zdXJlIHRoZSBzZXJ2ZXIgaXMgc3RhcnRlZCBiZWZvcmUgYXBwbHlpbmcgbWlkZGxld2FyZVxuICBcbiAgc2VydmVyLmFwcGx5TWlkZGxld2FyZSh7IGFwcCwgcGF0aDogJy9ncmFwaHFsJywgY29yczogY29yc09wdGlvbnMgfSk7XG4gIGNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDgxODE7XG4gIGFwcC5saXN0ZW4oeyBwb3J0OiBwb3J0IH0sICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgQXBvbGxvIFNlcnZlciBvbiBwb3J0ICR7cG9ydH0vZ3JhcGhxbGApO1xuICB9KTtcbn1cblxuc3RhcnRBcG9sbG9TZXJ2ZXIoKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhcnRpbmcgQXBvbGxvIFNlcnZlcjonLCBlcnJvcik7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEI7O0FBQ0EsTUFBTTtFQUFFQztBQUFGLElBQW1CRixPQUFPLENBQUMsdUJBQUQsQ0FBaEM7O0FBQ0EsTUFBTUcsUUFBUSxHQUFHSCxPQUFPLENBQUMsa0JBQUQsQ0FBeEI7O0FBQ0EsTUFBTUksU0FBUyxHQUFHSixPQUFPLENBQUMscUJBQUQsQ0FBekI7O0FBQ0EsTUFBTUssWUFBWSxHQUFHTCxPQUFPLENBQUMsbUJBQUQsQ0FBNUI7O0FBQ0EsTUFBTU0sSUFBSSxHQUFHTixPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFDQSxNQUFNTyxZQUFZLEdBQUdQLE9BQU8sQ0FBQyxlQUFELENBQTVCOztBQUVBLE1BQU1RLEdBQUcsR0FBR1QsT0FBTyxFQUFuQjtBQUVBUyxHQUFHLENBQUNDLEdBQUosQ0FBUSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxLQUFvQjtFQUMxQkQsR0FBRyxDQUFDRSxTQUFKLENBQWMsd0JBQWQsRUFBd0MsU0FBeEM7RUFDQUQsSUFBSTtBQUNMLENBSEQ7QUFNQSxNQUFNRSxXQUFXLEdBQUc7RUFDbEJDLE1BQU0sRUFBRSxDQUFDLGtDQUFELEVBQXFDLHVCQUFyQyxDQURVO0VBRWxCQyxXQUFXLEVBQUU7QUFGSyxDQUFwQjtBQUtBUixHQUFHLENBQUNDLEdBQUosQ0FBUUgsSUFBSSxDQUFDUSxXQUFELENBQVo7QUFDQU4sR0FBRyxDQUFDQyxHQUFKLENBQVFGLFlBQVksRUFBcEI7O0FBRUEsZUFBZVUsaUJBQWYsR0FBbUM7RUFDakMsTUFBTUMsTUFBTSxHQUFHLElBQUloQixZQUFKLENBQWlCO0lBQzlCQyxRQUQ4QjtJQUU5QkMsU0FGOEI7SUFHOUJlLE9BQU8sRUFBRSxPQUFPO01BQUVULEdBQUY7TUFBT0M7SUFBUCxDQUFQLEtBQXdCO01BQy9CLE1BQU1TLEtBQUssR0FBR1YsR0FBRyxDQUFDVyxPQUFKLENBQVksT0FBWixLQUF3QixFQUF0QztNQUNBLE9BQU87UUFBRUQsS0FBRjtRQUFTVDtNQUFULENBQVA7SUFDRDtFQU42QixDQUFqQixDQUFmO0VBU0EsTUFBTU8sTUFBTSxDQUFDSSxLQUFQLEVBQU4sQ0FWaUMsQ0FVWDs7RUFFdEJKLE1BQU0sQ0FBQ0ssZUFBUCxDQUF1QjtJQUFFZixHQUFGO0lBQU9nQixJQUFJLEVBQUUsVUFBYjtJQUF5QmxCLElBQUksRUFBRVE7RUFBL0IsQ0FBdkI7RUFDQSxNQUFNVyxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxJQUFaLElBQW9CLElBQWpDO0VBQ0FwQixHQUFHLENBQUNxQixNQUFKLENBQVc7SUFBRUosSUFBSSxFQUFFQTtFQUFSLENBQVgsRUFBMkIsTUFBTTtJQUMvQkssT0FBTyxDQUFDQyxHQUFSLENBQWEseUJBQXdCTixJQUFLLFVBQTFDO0VBQ0QsQ0FGRDtBQUdEOztBQUVEUixpQkFBaUIsR0FBR2UsS0FBcEIsQ0FBMkJDLEtBQUQsSUFBVztFQUNuQ0gsT0FBTyxDQUFDRyxLQUFSLENBQWMsK0JBQWQsRUFBK0NBLEtBQS9DO0FBQ0QsQ0FGRCJ9","map":{"version":3,"names":["express","require","config","ApolloServer","typeDefs","resolvers","dbconnection","cors","cookieParser","app","use","req","res","next","setHeader","corsOptions","origin","credentials","startApolloServer","server","context","token","cookies","start","applyMiddleware","path","port","process","env","PORT","listen","console","log","catch","error"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/","sources":["index.js"],"sourcesContent":["const express = require('express');\nrequire('dotenv').config();\nconst { ApolloServer } = require('apollo-server-express');\nconst typeDefs = require('./graphql/schema');\nconst resolvers = require('./graphql/resolvers');\nconst dbconnection = require('./data/connectors');\nconst cors = require('cors');\nconst cookieParser = require('cookie-parser');\n\nconst app = express();\n\napp.use((req, res, next) => {\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  next();\n});\n\n\nconst corsOptions = {\n  origin: ['https://studio.apollographql.com', 'http://localhost:3000'],\n  credentials: true,\n};\n\napp.use(cors(corsOptions));\napp.use(cookieParser());\n\nasync function startApolloServer() {\n  const server = new ApolloServer({ \n    typeDefs, \n    resolvers,\n    context: async ({ req, res }) => {\n      const token = req.cookies['token'] || '';\n      return { token, res };\n    },\n  });\n\n  await server.start(); // Ensure the server is started before applying middleware\n  \n  server.applyMiddleware({ app, path: '/graphql', cors: corsOptions });\n  const port = process.env.PORT || 8181;\n  app.listen({ port: port }, () => {\n    console.log(`Apollo Server on port ${port}/graphql`);\n  });\n}\n\nstartApolloServer().catch((error) => {\n  console.error('Error starting Apollo Server:', error);\n});\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,MAAM;EAAEC;AAAF,IAAmBF,OAAO,CAAC,uBAAD,CAAhC;;AACA,MAAMG,QAAQ,GAAGH,OAAO,CAAC,kBAAD,CAAxB;;AACA,MAAMI,SAAS,GAAGJ,OAAO,CAAC,qBAAD,CAAzB;;AACA,MAAMK,YAAY,GAAGL,OAAO,CAAC,mBAAD,CAA5B;;AACA,MAAMM,IAAI,GAAGN,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMO,YAAY,GAAGP,OAAO,CAAC,eAAD,CAA5B;;AAEA,MAAMQ,GAAG,GAAGT,OAAO,EAAnB;AAEAS,GAAG,CAACC,GAAJ,CAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;EAC1BD,GAAG,CAACE,SAAJ,CAAc,wBAAd,EAAwC,SAAxC;EACAD,IAAI;AACL,CAHD;AAMA,MAAME,WAAW,GAAG;EAClBC,MAAM,EAAE,CAAC,kCAAD,EAAqC,uBAArC,CADU;EAElBC,WAAW,EAAE;AAFK,CAApB;AAKAR,GAAG,CAACC,GAAJ,CAAQH,IAAI,CAACQ,WAAD,CAAZ;AACAN,GAAG,CAACC,GAAJ,CAAQF,YAAY,EAApB;;AAEA,eAAeU,iBAAf,GAAmC;EACjC,MAAMC,MAAM,GAAG,IAAIhB,YAAJ,CAAiB;IAC9BC,QAD8B;IAE9BC,SAF8B;IAG9Be,OAAO,EAAE,OAAO;MAAET,GAAF;MAAOC;IAAP,CAAP,KAAwB;MAC/B,MAAMS,KAAK,GAAGV,GAAG,CAACW,OAAJ,CAAY,OAAZ,KAAwB,EAAtC;MACA,OAAO;QAAED,KAAF;QAAST;MAAT,CAAP;IACD;EAN6B,CAAjB,CAAf;EASA,MAAMO,MAAM,CAACI,KAAP,EAAN,CAViC,CAUX;;EAEtBJ,MAAM,CAACK,eAAP,CAAuB;IAAEf,GAAF;IAAOgB,IAAI,EAAE,UAAb;IAAyBlB,IAAI,EAAEQ;EAA/B,CAAvB;EACA,MAAMW,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;EACApB,GAAG,CAACqB,MAAJ,CAAW;IAAEJ,IAAI,EAAEA;EAAR,CAAX,EAA2B,MAAM;IAC/BK,OAAO,CAACC,GAAR,CAAa,yBAAwBN,IAAK,UAA1C;EACD,CAFD;AAGD;;AAEDR,iBAAiB,GAAGe,KAApB,CAA2BC,KAAD,IAAW;EACnCH,OAAO,CAACG,KAAR,CAAc,+BAAd,EAA+CA,KAA/C;AACD,CAFD"}},"mtime":1706135267950},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/schema/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/schema/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const {\n  gql\n} = require('apollo-server-express');\n\nconst typeDefs = gql`\ntype Query {\n    getAllPublishedArticles(categories: [String], limit: Int, offset: Int): getAllPublishedArticlesResponse\n    getArticleById(id: String!): Article\n    getArticlesByDate(from: String!, to: String!): [Article!]\n    getCategories: [Category]\n    getAllProjects: [Article!]\n    getAllArticles: [Article!]\n    verifyToken: AuthConfirmation!\n}\n\ninput ArticleInput {\n    title: String!\n    summary: String!\n    content: String!\n    imageUrl: String!\n    categories: [String]\n    published: Boolean!\n    project: Boolean!\n    id: String\n}\n\ninput UserInput {\n    username: String!\n    password: String!\n    firstName: String\n    lastName: String\n}\n\ntype Mutation {\n    createArticle(input: ArticleInput!): Article!\n    createCategory(categoryName: String!): Category!\n    deleteArticle(id: String!): Boolean!\n    login(username: String!, password: String!): AuthToken!\n    createUser(input:UserInput!): AuthToken!\n}\n\ntype Article {\n    id: String\n    title: String\n    summary: String\n    content: String\n    imageUrl: String\n    date: String\n    categories: [String]\n    published: Boolean\n    project: Boolean\n}\n\ntype Category {\n    id: String\n    name: String\n}\n\ntype AuthToken {\n    token: String!\n}\n\ntype AuthConfirmation {\n    authenticated: Boolean\n}\n\ntype getAllPublishedArticlesResponse {\n    articles: [Article!]\n    total: Int!\n}\n`;\nmodule.exports = typeDefs;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJncWwiLCJyZXF1aXJlIiwidHlwZURlZnMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamFtZXNzdG9yci9Qcm9qZWN0cy9Qb3J0Zm9saW8vcG9ydGZvbGlvLXNlcnZpY2VzL3NyYy9ncmFwaHFsL3NjaGVtYS8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuY29uc3QgeyBncWwgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItZXhwcmVzcycpO1xuXG5jb25zdCB0eXBlRGVmcyA9IGdxbGBcbnR5cGUgUXVlcnkge1xuICAgIGdldEFsbFB1Ymxpc2hlZEFydGljbGVzKGNhdGVnb3JpZXM6IFtTdHJpbmddLCBsaW1pdDogSW50LCBvZmZzZXQ6IEludCk6IGdldEFsbFB1Ymxpc2hlZEFydGljbGVzUmVzcG9uc2VcbiAgICBnZXRBcnRpY2xlQnlJZChpZDogU3RyaW5nISk6IEFydGljbGVcbiAgICBnZXRBcnRpY2xlc0J5RGF0ZShmcm9tOiBTdHJpbmchLCB0bzogU3RyaW5nISk6IFtBcnRpY2xlIV1cbiAgICBnZXRDYXRlZ29yaWVzOiBbQ2F0ZWdvcnldXG4gICAgZ2V0QWxsUHJvamVjdHM6IFtBcnRpY2xlIV1cbiAgICBnZXRBbGxBcnRpY2xlczogW0FydGljbGUhXVxuICAgIHZlcmlmeVRva2VuOiBBdXRoQ29uZmlybWF0aW9uIVxufVxuXG5pbnB1dCBBcnRpY2xlSW5wdXQge1xuICAgIHRpdGxlOiBTdHJpbmchXG4gICAgc3VtbWFyeTogU3RyaW5nIVxuICAgIGNvbnRlbnQ6IFN0cmluZyFcbiAgICBpbWFnZVVybDogU3RyaW5nIVxuICAgIGNhdGVnb3JpZXM6IFtTdHJpbmddXG4gICAgcHVibGlzaGVkOiBCb29sZWFuIVxuICAgIHByb2plY3Q6IEJvb2xlYW4hXG4gICAgaWQ6IFN0cmluZ1xufVxuXG5pbnB1dCBVc2VySW5wdXQge1xuICAgIHVzZXJuYW1lOiBTdHJpbmchXG4gICAgcGFzc3dvcmQ6IFN0cmluZyFcbiAgICBmaXJzdE5hbWU6IFN0cmluZ1xuICAgIGxhc3ROYW1lOiBTdHJpbmdcbn1cblxudHlwZSBNdXRhdGlvbiB7XG4gICAgY3JlYXRlQXJ0aWNsZShpbnB1dDogQXJ0aWNsZUlucHV0ISk6IEFydGljbGUhXG4gICAgY3JlYXRlQ2F0ZWdvcnkoY2F0ZWdvcnlOYW1lOiBTdHJpbmchKTogQ2F0ZWdvcnkhXG4gICAgZGVsZXRlQXJ0aWNsZShpZDogU3RyaW5nISk6IEJvb2xlYW4hXG4gICAgbG9naW4odXNlcm5hbWU6IFN0cmluZyEsIHBhc3N3b3JkOiBTdHJpbmchKTogQXV0aFRva2VuIVxuICAgIGNyZWF0ZVVzZXIoaW5wdXQ6VXNlcklucHV0ISk6IEF1dGhUb2tlbiFcbn1cblxudHlwZSBBcnRpY2xlIHtcbiAgICBpZDogU3RyaW5nXG4gICAgdGl0bGU6IFN0cmluZ1xuICAgIHN1bW1hcnk6IFN0cmluZ1xuICAgIGNvbnRlbnQ6IFN0cmluZ1xuICAgIGltYWdlVXJsOiBTdHJpbmdcbiAgICBkYXRlOiBTdHJpbmdcbiAgICBjYXRlZ29yaWVzOiBbU3RyaW5nXVxuICAgIHB1Ymxpc2hlZDogQm9vbGVhblxuICAgIHByb2plY3Q6IEJvb2xlYW5cbn1cblxudHlwZSBDYXRlZ29yeSB7XG4gICAgaWQ6IFN0cmluZ1xuICAgIG5hbWU6IFN0cmluZ1xufVxuXG50eXBlIEF1dGhUb2tlbiB7XG4gICAgdG9rZW46IFN0cmluZyFcbn1cblxudHlwZSBBdXRoQ29uZmlybWF0aW9uIHtcbiAgICBhdXRoZW50aWNhdGVkOiBCb29sZWFuXG59XG5cbnR5cGUgZ2V0QWxsUHVibGlzaGVkQXJ0aWNsZXNSZXNwb25zZSB7XG4gICAgYXJ0aWNsZXM6IFtBcnRpY2xlIV1cbiAgICB0b3RhbDogSW50IVxufVxuYDtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHR5cGVEZWZzOyJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBTTtFQUFFQTtBQUFGLElBQVVDLE9BQU8sQ0FBQyx1QkFBRCxDQUF2Qjs7QUFFQSxNQUFNQyxRQUFRLEdBQUdGLEdBQUk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBbEVBO0FBcUVBRyxNQUFNLENBQUNDLE9BQVAsR0FBaUJGLFFBQWpCIn0=","map":{"version":3,"names":["gql","require","typeDefs","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/schema/","sources":["index.js"],"sourcesContent":["\nconst { gql } = require('apollo-server-express');\n\nconst typeDefs = gql`\ntype Query {\n    getAllPublishedArticles(categories: [String], limit: Int, offset: Int): getAllPublishedArticlesResponse\n    getArticleById(id: String!): Article\n    getArticlesByDate(from: String!, to: String!): [Article!]\n    getCategories: [Category]\n    getAllProjects: [Article!]\n    getAllArticles: [Article!]\n    verifyToken: AuthConfirmation!\n}\n\ninput ArticleInput {\n    title: String!\n    summary: String!\n    content: String!\n    imageUrl: String!\n    categories: [String]\n    published: Boolean!\n    project: Boolean!\n    id: String\n}\n\ninput UserInput {\n    username: String!\n    password: String!\n    firstName: String\n    lastName: String\n}\n\ntype Mutation {\n    createArticle(input: ArticleInput!): Article!\n    createCategory(categoryName: String!): Category!\n    deleteArticle(id: String!): Boolean!\n    login(username: String!, password: String!): AuthToken!\n    createUser(input:UserInput!): AuthToken!\n}\n\ntype Article {\n    id: String\n    title: String\n    summary: String\n    content: String\n    imageUrl: String\n    date: String\n    categories: [String]\n    published: Boolean\n    project: Boolean\n}\n\ntype Category {\n    id: String\n    name: String\n}\n\ntype AuthToken {\n    token: String!\n}\n\ntype AuthConfirmation {\n    authenticated: Boolean\n}\n\ntype getAllPublishedArticlesResponse {\n    articles: [Article!]\n    total: Int!\n}\n`;\n\n\nmodule.exports = typeDefs;"],"mappings":"AACA,MAAM;EAAEA;AAAF,IAAUC,OAAO,CAAC,uBAAD,CAAvB;;AAEA,MAAMC,QAAQ,GAAGF,GAAI;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAlEA;AAqEAG,MAAM,CAACC,OAAP,GAAiBF,QAAjB"}},"mtime":1705696992287},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const articleResolvers = require('./articleResolvers');\n\nconst categoryResolvers = require('./categoryResolvers');\n\nconst userResolvers = require('./userResolvers');\n\nconst resolvers = [articleResolvers, categoryResolvers, userResolvers];\nmodule.exports = resolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcnRpY2xlUmVzb2x2ZXJzIiwicmVxdWlyZSIsImNhdGVnb3J5UmVzb2x2ZXJzIiwidXNlclJlc29sdmVycyIsInJlc29sdmVycyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjL2dyYXBocWwvcmVzb2x2ZXJzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXJ0aWNsZVJlc29sdmVycyA9IHJlcXVpcmUoJy4vYXJ0aWNsZVJlc29sdmVycycpO1xuY29uc3QgY2F0ZWdvcnlSZXNvbHZlcnMgPSByZXF1aXJlKCcuL2NhdGVnb3J5UmVzb2x2ZXJzJyk7XG5jb25zdCB1c2VyUmVzb2x2ZXJzID0gcmVxdWlyZSgnLi91c2VyUmVzb2x2ZXJzJyk7XG5cbmNvbnN0IHJlc29sdmVycyA9IFthcnRpY2xlUmVzb2x2ZXJzLCBjYXRlZ29yeVJlc29sdmVycywgdXNlclJlc29sdmVyc107XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzb2x2ZXJzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxnQkFBZ0IsR0FBR0MsT0FBTyxDQUFDLG9CQUFELENBQWhDOztBQUNBLE1BQU1DLGlCQUFpQixHQUFHRCxPQUFPLENBQUMscUJBQUQsQ0FBakM7O0FBQ0EsTUFBTUUsYUFBYSxHQUFHRixPQUFPLENBQUMsaUJBQUQsQ0FBN0I7O0FBRUEsTUFBTUcsU0FBUyxHQUFHLENBQUNKLGdCQUFELEVBQW1CRSxpQkFBbkIsRUFBc0NDLGFBQXRDLENBQWxCO0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkYsU0FBakIifQ==","map":{"version":3,"names":["articleResolvers","require","categoryResolvers","userResolvers","resolvers","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["index.js"],"sourcesContent":["const articleResolvers = require('./articleResolvers');\nconst categoryResolvers = require('./categoryResolvers');\nconst userResolvers = require('./userResolvers');\n\nconst resolvers = [articleResolvers, categoryResolvers, userResolvers];\n\nmodule.exports = resolvers"],"mappings":"AAAA,MAAMA,gBAAgB,GAAGC,OAAO,CAAC,oBAAD,CAAhC;;AACA,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,qBAAD,CAAjC;;AACA,MAAME,aAAa,GAAGF,OAAO,CAAC,iBAAD,CAA7B;;AAEA,MAAMG,SAAS,GAAG,CAACJ,gBAAD,EAAmBE,iBAAnB,EAAsCC,aAAtC,CAAlB;AAEAE,MAAM,CAACC,OAAP,GAAiBF,SAAjB"}},"mtime":1704536377793},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/articleResolvers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const {\n  format\n} = require(\"path\");\n\nconst Article = require(\"../../data/models/article\");\n\nconst jwt = require(\"jsonwebtoken\");\n\nfunction verifyToken(token, secret) {\n  try {\n    const decoded = jwt.verify(token, secret);\n    return decoded;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n\nfunction formatDate(date) {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${day}-${month}-${year}`;\n}\n\nconst articleResolvers = {\n  Query: {\n    getAllPublishedArticles: async (_, {\n      categories,\n      limit,\n      offset\n    }) => {\n      try {\n        const articles = await Article.getAllPublishedArticles(categories, limit, offset);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching published articles: \" + error.message);\n      }\n    },\n    getArticleById: async (_, {\n      id\n    }) => {\n      try {\n        const article = await Article.getArticleById(id);\n        return article;\n      } catch (error) {\n        throw new Error(\"Error fetching article by ID: \" + error.message);\n      }\n    },\n    getArticlesByDate: async (_, {\n      from,\n      to\n    }) => {\n      try {\n        const articles = await Article.getArticlesByDate(from, to);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching articles by date: \" + error.message);\n      }\n    },\n    getAllProjects: async () => {\n      try {\n        const articles = await Article.getAllProjects();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching projects: \" + error.message);\n      }\n    },\n    getAllArticles: async (_, args, context) => {\n      const {\n        token\n      } = context;\n\n      if (!token) {\n        throw new Error('Authentication required');\n      }\n\n      const decoded = verifyToken(token, process.env.SECRET);\n\n      try {\n        const articles = await Article.getAllArticles();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching all articles: \" + error.message);\n      }\n    }\n  },\n  Mutation: {\n    createArticle: async (_, {\n      input\n    }, context) => {\n      const {\n        token\n      } = context;\n\n      if (!token) {\n        throw new Error('Authentication required');\n      }\n\n      if (verifyToken(token, process.env.SECRET).username !== 'admin') {\n        throw new Error('Authentication failed');\n      }\n\n      if (input.id) {\n        try {\n          const updatedArticle = {\n            title: input.title,\n            summary: input.summary,\n            content: input.content,\n            imageUrl: input.imageUrl,\n            categories: input.categories,\n            published: input.published,\n            project: input.project,\n            date: formatDate(new Date())\n          };\n          const response = await Article.updateOne({\n            _id: input.id\n          }, updatedArticle);\n\n          if (response.nModified === 0) {\n            throw new Error(\"Article not updated\");\n          } else {\n            const article = await Article.getArticleById(input.id);\n            return article;\n          }\n        } catch (error) {\n          throw new Error(\"Error updating article: \" + error.message);\n        }\n      }\n\n      try {\n        const newArticle = {\n          title: input.title,\n          summary: input.summary,\n          content: input.content,\n          imageUrl: input.imageUrl,\n          categories: input.categories,\n          published: input.published,\n          project: input.project,\n          date: formatDate(new Date())\n        };\n        const response = await Article.createArticle(newArticle);\n        console.log(response);\n        return response;\n      } catch (error) {\n        throw new Error(\"Error creating article: \" + error.message);\n      }\n    },\n    deleteArticle: async (_, {\n      id\n    }) => {\n      try {\n        const response = await Article.deleteOne({\n          _id: id\n        });\n        return response;\n      } catch (error) {\n        throw new Error(\"Error deleting article: \" + error.message);\n      }\n    }\n  }\n};\nmodule.exports = articleResolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmb3JtYXQiLCJyZXF1aXJlIiwiQXJ0aWNsZSIsImp3dCIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJzZWNyZXQiLCJkZWNvZGVkIiwidmVyaWZ5IiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiU3RyaW5nIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImRheSIsImdldERhdGUiLCJhcnRpY2xlUmVzb2x2ZXJzIiwiUXVlcnkiLCJnZXRBbGxQdWJsaXNoZWRBcnRpY2xlcyIsIl8iLCJjYXRlZ29yaWVzIiwibGltaXQiLCJvZmZzZXQiLCJhcnRpY2xlcyIsImdldEFydGljbGVCeUlkIiwiaWQiLCJhcnRpY2xlIiwiZ2V0QXJ0aWNsZXNCeURhdGUiLCJmcm9tIiwidG8iLCJnZXRBbGxQcm9qZWN0cyIsImdldEFsbEFydGljbGVzIiwiYXJncyIsImNvbnRleHQiLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUIiwiTXV0YXRpb24iLCJjcmVhdGVBcnRpY2xlIiwiaW5wdXQiLCJ1c2VybmFtZSIsInVwZGF0ZWRBcnRpY2xlIiwidGl0bGUiLCJzdW1tYXJ5IiwiY29udGVudCIsImltYWdlVXJsIiwicHVibGlzaGVkIiwicHJvamVjdCIsIkRhdGUiLCJyZXNwb25zZSIsInVwZGF0ZU9uZSIsIl9pZCIsIm5Nb2RpZmllZCIsIm5ld0FydGljbGUiLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlQXJ0aWNsZSIsImRlbGV0ZU9uZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjL2dyYXBocWwvcmVzb2x2ZXJzLyIsInNvdXJjZXMiOlsiYXJ0aWNsZVJlc29sdmVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IGZvcm1hdCB9ID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBBcnRpY2xlID0gcmVxdWlyZShcIi4uLy4uL2RhdGEvbW9kZWxzL2FydGljbGVcIik7XG5jb25zdCBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xuXG5mdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbiwgc2VjcmV0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHNlY3JldCk7XG5cbiAgICByZXR1cm4gZGVjb2RlZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICByZXR1cm4gYCR7ZGF5fS0ke21vbnRofS0ke3llYXJ9YDtcbiAgfVxuXG5jb25zdCBhcnRpY2xlUmVzb2x2ZXJzID0ge1xuICBRdWVyeToge1xuICAgIGdldEFsbFB1Ymxpc2hlZEFydGljbGVzOiBhc3luYyAoXywgeyBjYXRlZ29yaWVzLCBsaW1pdCwgb2Zmc2V0IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgQXJ0aWNsZS5nZXRBbGxQdWJsaXNoZWRBcnRpY2xlcyhjYXRlZ29yaWVzLCBsaW1pdCwgb2Zmc2V0KTtcbiAgICAgICAgcmV0dXJuIGFydGljbGVzO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHVibGlzaGVkIGFydGljbGVzOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0QXJ0aWNsZUJ5SWQ6IGFzeW5jIChfLCB7IGlkIH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFydGljbGUgPSBhd2FpdCBBcnRpY2xlLmdldEFydGljbGVCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIGFydGljbGU7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBhcnRpY2xlIGJ5IElEOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0QXJ0aWNsZXNCeURhdGU6IGFzeW5jIChfLCB7IGZyb20sIHRvIH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgQXJ0aWNsZS5nZXRBcnRpY2xlc0J5RGF0ZShmcm9tLCB0byk7XG4gICAgICAgIHJldHVybiBhcnRpY2xlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIGFydGljbGVzIGJ5IGRhdGU6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRBbGxQcm9qZWN0czogYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXJ0aWNsZXMgPSBhd2FpdCBBcnRpY2xlLmdldEFsbFByb2plY3RzKCk7XG4gICAgICAgIHJldHVybiBhcnRpY2xlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0QWxsQXJ0aWNsZXM6IGFzeW5jIChfLCBhcmdzLCBjb250ZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IHt0b2tlbn0gPSBjb250ZXh0O1xuICAgICAgICBcbiAgICAgICAgaWYoIXRva2VuKXtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4odG9rZW4sIHByb2Nlc3MuZW52LlNFQ1JFVCk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgQXJ0aWNsZS5nZXRBbGxBcnRpY2xlcygpO1xuICAgICAgICByZXR1cm4gYXJ0aWNsZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBhbGwgYXJ0aWNsZXM6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgTXV0YXRpb246IHtcbiAgICBjcmVhdGVBcnRpY2xlOiBhc3luYyAoXywgeyBpbnB1dCB9LCBjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB7dG9rZW59ID0gY29udGV4dDtcbiAgICAgIGlmKCF0b2tlbil7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYodmVyaWZ5VG9rZW4odG9rZW4sIHByb2Nlc3MuZW52LlNFQ1JFVCkudXNlcm5hbWUgIT09ICdhZG1pbicpe1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5wdXQuaWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQXJ0aWNsZSA9IHtcbiAgICAgICAgICAgIHRpdGxlOiBpbnB1dC50aXRsZSxcbiAgICAgICAgICAgIHN1bW1hcnk6IGlucHV0LnN1bW1hcnksXG4gICAgICAgICAgICBjb250ZW50OiBpbnB1dC5jb250ZW50LFxuICAgICAgICAgICAgaW1hZ2VVcmw6IGlucHV0LmltYWdlVXJsLFxuICAgICAgICAgICAgY2F0ZWdvcmllczogaW5wdXQuY2F0ZWdvcmllcyxcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogaW5wdXQucHVibGlzaGVkLFxuICAgICAgICAgICAgcHJvamVjdDogaW5wdXQucHJvamVjdCxcbiAgICAgICAgICAgIGRhdGU6IGZvcm1hdERhdGUobmV3IERhdGUoKSksXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEFydGljbGUudXBkYXRlT25lKFxuICAgICAgICAgICAgeyBfaWQ6IGlucHV0LmlkIH0sXG4gICAgICAgICAgICB1cGRhdGVkQXJ0aWNsZVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm5Nb2RpZmllZCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJ0aWNsZSBub3QgdXBkYXRlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGNvbnN0IGFydGljbGUgPSBhd2FpdCBBcnRpY2xlLmdldEFydGljbGVCeUlkKGlucHV0LmlkKTtcbiAgICAgICAgICAgIHJldHVybiBhcnRpY2xlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB1cGRhdGluZyBhcnRpY2xlOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXdBcnRpY2xlID0ge1xuICAgICAgICAgIHRpdGxlOiBpbnB1dC50aXRsZSxcbiAgICAgICAgICBzdW1tYXJ5OiBpbnB1dC5zdW1tYXJ5LFxuICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LmNvbnRlbnQsXG4gICAgICAgICAgaW1hZ2VVcmw6IGlucHV0LmltYWdlVXJsLFxuICAgICAgICAgIGNhdGVnb3JpZXM6IGlucHV0LmNhdGVnb3JpZXMsXG4gICAgICAgICAgcHVibGlzaGVkOiBpbnB1dC5wdWJsaXNoZWQsXG4gICAgICAgICAgcHJvamVjdDogaW5wdXQucHJvamVjdCxcbiAgICAgICAgICBkYXRlOiBmb3JtYXREYXRlKG5ldyBEYXRlKCkpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEFydGljbGUuY3JlYXRlQXJ0aWNsZShuZXdBcnRpY2xlKTtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNyZWF0aW5nIGFydGljbGU6IFwiICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAgZGVsZXRlQXJ0aWNsZTogYXN5bmMgKF8sIHsgaWQgfSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXJ0aWNsZS5kZWxldGVPbmUoeyBfaWQ6IGlkIH0pO1xuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBkZWxldGluZyBhcnRpY2xlOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9IFxuICB9LFxuIFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBhcnRpY2xlUmVzb2x2ZXJzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0VBQUVBO0FBQUYsSUFBYUMsT0FBTyxDQUFDLE1BQUQsQ0FBMUI7O0FBQ0EsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsMkJBQUQsQ0FBdkI7O0FBQ0EsTUFBTUUsR0FBRyxHQUFHRixPQUFPLENBQUMsY0FBRCxDQUFuQjs7QUFFQSxTQUFTRyxXQUFULENBQXFCQyxLQUFyQixFQUE0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","map":{"version":3,"names":["format","require","Article","jwt","verifyToken","token","secret","decoded","verify","error","Error","message","formatDate","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","articleResolvers","Query","getAllPublishedArticles","_","categories","limit","offset","articles","getArticleById","id","article","getArticlesByDate","from","to","getAllProjects","getAllArticles","args","context","process","env","SECRET","Mutation","createArticle","input","username","updatedArticle","title","summary","content","imageUrl","published","project","Date","response","updateOne","_id","nModified","newArticle","console","log","deleteArticle","deleteOne","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["articleResolvers.js"],"sourcesContent":["const { format } = require(\"path\");\nconst Article = require(\"../../data/models/article\");\nconst jwt = require(\"jsonwebtoken\");\n\nfunction verifyToken(token, secret) {\n  try {\n    const decoded = jwt.verify(token, secret);\n\n    return decoded;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n\nfunction formatDate(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${day}-${month}-${year}`;\n  }\n\nconst articleResolvers = {\n  Query: {\n    getAllPublishedArticles: async (_, { categories, limit, offset }) => {\n      try {\n        const articles = await Article.getAllPublishedArticles(categories, limit, offset);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching published articles: \" + error.message);\n      }\n    },\n    getArticleById: async (_, { id }) => {\n      try {\n        const article = await Article.getArticleById(id);\n        return article;\n      } catch (error) {\n        throw new Error(\"Error fetching article by ID: \" + error.message);\n      }\n    },\n    getArticlesByDate: async (_, { from, to }) => {\n      try {\n        const articles = await Article.getArticlesByDate(from, to);\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching articles by date: \" + error.message);\n      }\n    },\n    getAllProjects: async () => {\n      try {\n        const articles = await Article.getAllProjects();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching projects: \" + error.message);\n      }\n    },\n    getAllArticles: async (_, args, context) => {\n        const {token} = context;\n        \n        if(!token){\n            throw new Error('Authentication required');\n        }\n        const decoded = verifyToken(token, process.env.SECRET);\n      \n      try {\n        const articles = await Article.getAllArticles();\n        return articles;\n      } catch (error) {\n        throw new Error(\"Error fetching all articles: \" + error.message);\n      }\n    },\n  },\n  Mutation: {\n    createArticle: async (_, { input }, context) => {\n      const {token} = context;\n      if(!token){\n        throw new Error('Authentication required');\n      }\n      \n      if(verifyToken(token, process.env.SECRET).username !== 'admin'){\n        throw new Error('Authentication failed');\n      }\n\n      if (input.id) {\n        try {\n          const updatedArticle = {\n            title: input.title,\n            summary: input.summary,\n            content: input.content,\n            imageUrl: input.imageUrl,\n            categories: input.categories,\n            published: input.published,\n            project: input.project,\n            date: formatDate(new Date()),\n          };\n          const response = await Article.updateOne(\n            { _id: input.id },\n            updatedArticle\n          );\n          if (response.nModified === 0) {\n            throw new Error(\"Article not updated\");\n          }\n          else{\n            const article = await Article.getArticleById(input.id);\n            return article;\n          }\n          \n          \n        } catch (error) {\n          throw new Error(\"Error updating article: \" + error.message);\n        }\n      }\n      try {\n        const newArticle = {\n          title: input.title,\n          summary: input.summary,\n          content: input.content,\n          imageUrl: input.imageUrl,\n          categories: input.categories,\n          published: input.published,\n          project: input.project,\n          date: formatDate(new Date()),\n        };\n        const response = await Article.createArticle(newArticle);\n        console.log(response)\n        return response;\n      } catch (error) {\n        throw new Error(\"Error creating article: \" + error.message);\n      }\n    },\n     deleteArticle: async (_, { id }) => {\n        try {\n          const response = await Article.deleteOne({ _id: id });\n          return response;\n        } catch (error) {\n          throw new Error(\"Error deleting article: \" + error.message);\n        }\n      } \n  },\n \n};\n\nmodule.exports = articleResolvers;\n"],"mappings":"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"}},"mtime":1706136054759},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/article.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst articleSchema = new mongoose.Schema({\n  title: {\n    type: String,\n    required: true\n  },\n  summary: {\n    type: String,\n    required: true\n  },\n  content: {\n    type: String,\n    required: true\n  },\n  imageUrl: {\n    type: String,\n    required: true\n  },\n  date: {\n    type: String,\n    required: true\n  },\n  categories: {\n    type: [String],\n    required: false\n  },\n  published: {\n    type: Boolean,\n    required: true\n  },\n  project: {\n    type: Boolean,\n    required: true\n  }\n});\nconst Article = mongoose.model('Article', articleSchema);\n\nArticle.getAllPublishedArticles = async (categories, limit, offset) => {\n  if (categories && categories.length > 0) {\n    try {\n      const total = await Article.find({\n        published: true,\n        categories: {\n          $in: categories\n        }\n      }).countDocuments();\n      const articles = await Article.find({\n        published: true,\n        categories: {\n          $in: categories\n        }\n      }).sort({\n        date: -1\n      }).skip(offset).limit(limit);\n      return {\n        articles,\n        total\n      };\n    } catch (error) {\n      throw new Error('Error fetching published articles: ' + error.message);\n    }\n  } else {\n    try {\n      const total = await Article.find({\n        published: true\n      }).countDocuments();\n      const articles = await Article.find({\n        published: true\n      }).sort({\n        date: -1\n      }).skip(offset).limit(limit);\n      return {\n        articles,\n        total\n      };\n    } catch (error) {\n      throw new Error('Error fetching published articles: ' + error.message);\n    }\n  }\n};\n\nArticle.getArticleById = async id => {\n  try {\n    const article = await Article.findOne({\n      _id: id\n    });\n    return article;\n  } catch (error) {\n    throw new Error('Error fetching article by ID: ' + error.message);\n  }\n};\n\nArticle.getArticlesByDate = async (from, to) => {\n  try {\n    const articles = await Article.find({\n      date: {\n        $gte: from,\n        $lte: to\n      }\n    });\n    return articles;\n  } catch (error) {\n    throw new Error('Error fetching articles by date range: ' + error.message);\n  }\n};\n\nArticle.getAllProjects = async () => {\n  try {\n    const articles = await Article.find({\n      project: true\n    });\n    return articles;\n  } catch (error) {\n    throw new Error('Error fetching project articles: ' + error.message);\n  }\n};\n\nArticle.getAllArticles = async () => {\n  try {\n    const articles = await Article.find({});\n    return articles;\n  } catch (error) {\n    throw new Error('Error fetching all articles: ' + error.message);\n  }\n};\n\nArticle.createArticle = async input => {\n  try {\n    const article = await Article.create(input);\n    return article;\n  } catch (error) {\n    throw new Error('Error creating article: ' + error.message);\n  }\n};\n\nmodule.exports = Article;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJhcnRpY2xlU2NoZW1hIiwiU2NoZW1hIiwidGl0bGUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJzdW1tYXJ5IiwiY29udGVudCIsImltYWdlVXJsIiwiZGF0ZSIsImNhdGVnb3JpZXMiLCJwdWJsaXNoZWQiLCJCb29sZWFuIiwicHJvamVjdCIsIkFydGljbGUiLCJtb2RlbCIsImdldEFsbFB1Ymxpc2hlZEFydGljbGVzIiwibGltaXQiLCJvZmZzZXQiLCJsZW5ndGgiLCJ0b3RhbCIsImZpbmQiLCIkaW4iLCJjb3VudERvY3VtZW50cyIsImFydGljbGVzIiwic29ydCIsInNraXAiLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsImdldEFydGljbGVCeUlkIiwiaWQiLCJhcnRpY2xlIiwiZmluZE9uZSIsIl9pZCIsImdldEFydGljbGVzQnlEYXRlIiwiZnJvbSIsInRvIiwiJGd0ZSIsIiRsdGUiLCJnZXRBbGxQcm9qZWN0cyIsImdldEFsbEFydGljbGVzIiwiY3JlYXRlQXJ0aWNsZSIsImlucHV0IiwiY3JlYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZGF0YS9tb2RlbHMvIiwic291cmNlcyI6WyJhcnRpY2xlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxuY29uc3QgYXJ0aWNsZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuXG4gICAgdGl0bGU6e1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBzdW1tYXJ5OntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgY29udGVudDp7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGltYWdlVXJsOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgZGF0ZTp7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGNhdGVnb3JpZXM6e1xuICAgICAgICB0eXBlOiBbU3RyaW5nXSxcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlXG4gICAgfSxcbiAgICBwdWJsaXNoZWQ6e1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgcHJvamVjdDp7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfVxufSlcblxuY29uc3QgQXJ0aWNsZSA9IG1vbmdvb3NlLm1vZGVsKCdBcnRpY2xlJywgYXJ0aWNsZVNjaGVtYSk7XG5cbkFydGljbGUuZ2V0QWxsUHVibGlzaGVkQXJ0aWNsZXMgPSBhc3luYyAoY2F0ZWdvcmllcywgbGltaXQsIG9mZnNldCkgPT4ge1xuICAgXG4gICAgaWYoY2F0ZWdvcmllcyAmJiBjYXRlZ29yaWVzLmxlbmd0aCA+IDApe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdG90YWwgPSBhd2FpdCBBcnRpY2xlLmZpbmQoeyBwdWJsaXNoZWQ6IHRydWUsIGNhdGVnb3JpZXM6IHsgJGluOiBjYXRlZ29yaWVzIH0gfSkuY291bnREb2N1bWVudHMoKTtcbiAgICAgICAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgQXJ0aWNsZS5maW5kKHsgcHVibGlzaGVkOiB0cnVlLCBjYXRlZ29yaWVzOiB7ICRpbjogY2F0ZWdvcmllcyB9IH0pXG4gICAgICAgICAgICAuc29ydCh7ZGF0ZTogLTF9KVxuICAgICAgICAgICAgLnNraXAob2Zmc2V0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KTtcbiAgICAgICAgICAgIHJldHVybiB7YXJ0aWNsZXMsIHRvdGFsfTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBmZXRjaGluZyBwdWJsaXNoZWQgYXJ0aWNsZXM6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdG90YWwgPSBhd2FpdCBBcnRpY2xlLmZpbmQoeyBwdWJsaXNoZWQ6IHRydWUgfSkuY291bnREb2N1bWVudHMoKTtcbiAgICAgICAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgQXJ0aWNsZS5maW5kKHsgcHVibGlzaGVkOiB0cnVlIH0pXG4gICAgICAgICAgICAuc29ydCh7ZGF0ZTogLTF9KVxuICAgICAgICAgICAgLnNraXAob2Zmc2V0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KTtcbiAgICAgICAgICAgIHJldHVybiB7YXJ0aWNsZXMsIHRvdGFsfTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBmZXRjaGluZyBwdWJsaXNoZWQgYXJ0aWNsZXM6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgfVxufVxuICBcbiAgQXJ0aWNsZS5nZXRBcnRpY2xlQnlJZCA9IGFzeW5jIChpZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcnRpY2xlID0gYXdhaXQgQXJ0aWNsZS5maW5kT25lKHsgX2lkOiBpZCB9KTtcbiAgICAgIHJldHVybiBhcnRpY2xlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFydGljbGUgYnkgSUQ6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gIFxuICBBcnRpY2xlLmdldEFydGljbGVzQnlEYXRlID0gYXN5bmMgKGZyb20sIHRvKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgQXJ0aWNsZS5maW5kKHsgZGF0ZTogeyAkZ3RlOiBmcm9tLCAkbHRlOiB0byB9IH0pO1xuICAgICAgcmV0dXJuIGFydGljbGVzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFydGljbGVzIGJ5IGRhdGUgcmFuZ2U6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gIFxuICBBcnRpY2xlLmdldEFsbFByb2plY3RzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcnRpY2xlcyA9IGF3YWl0IEFydGljbGUuZmluZCh7IHByb2plY3Q6IHRydWUgfSk7XG4gICAgICByZXR1cm4gYXJ0aWNsZXM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvamVjdCBhcnRpY2xlczogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcbiAgXG4gIEFydGljbGUuZ2V0QWxsQXJ0aWNsZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgQXJ0aWNsZS5maW5kKHt9KTtcbiAgICAgIHJldHVybiBhcnRpY2xlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBmZXRjaGluZyBhbGwgYXJ0aWNsZXM6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gIFxuICBBcnRpY2xlLmNyZWF0ZUFydGljbGUgPSBhc3luYyAoaW5wdXQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXJ0aWNsZSA9IGF3YWl0IEFydGljbGUuY3JlYXRlKGlucHV0KTtcbiAgICAgIHJldHVybiBhcnRpY2xlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGFydGljbGU6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gbW9kdWxlLmV4cG9ydHMgPSBBcnRpY2xlOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFFQSxNQUFNQyxhQUFhLEdBQUcsSUFBSUYsUUFBUSxDQUFDRyxNQUFiLENBQW9CO0VBRXRDQyxLQUFLLEVBQUM7SUFDRkMsSUFBSSxFQUFFQyxNQURKO0lBRUZDLFFBQVEsRUFBRTtFQUZSLENBRmdDO0VBTXRDQyxPQUFPLEVBQUM7SUFDSkgsSUFBSSxFQUFFQyxNQURGO0lBRUpDLFFBQVEsRUFBRTtFQUZOLENBTjhCO0VBVXRDRSxPQUFPLEVBQUM7SUFDSkosSUFBSSxFQUFFQyxNQURGO0lBRUpDLFFBQVEsRUFBRTtFQUZOLENBVjhCO0VBY3RDRyxRQUFRLEVBQUM7SUFDTEwsSUFBSSxFQUFFQyxNQUREO0lBRUxDLFFBQVEsRUFBRTtFQUZMLENBZDZCO0VBa0J0Q0ksSUFBSSxFQUFDO0lBQ0ROLElBQUksRUFBRUMsTUFETDtJQUVEQyxRQUFRLEVBQUU7RUFGVCxDQWxCaUM7RUFzQnRDSyxVQUFVLEVBQUM7SUFDUFAsSUFBSSxFQUFFLENBQUNDLE1BQUQsQ0FEQztJQUVQQyxRQUFRLEVBQUU7RUFGSCxDQXRCMkI7RUEwQnRDTSxTQUFTLEVBQUM7SUFDTlIsSUFBSSxFQUFFUyxPQURBO0lBRU5QLFFBQVEsRUFBRTtFQUZKLENBMUI0QjtFQThCdENRLE9BQU8sRUFBQztJQUNKVixJQUFJLEVBQUVTLE9BREY7SUFFSlAsUUFBUSxFQUFFO0VBRk47QUE5QjhCLENBQXBCLENBQXRCO0FBb0NBLE1BQU1TLE9BQU8sR0FBR2hCLFFBQVEsQ0FBQ2lCLEtBQVQsQ0FBZSxTQUFmLEVBQTBCZixhQUExQixDQUFoQjs7QUFFQWMsT0FBTyxDQUFDRSx1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","map":{"version":3,"names":["mongoose","require","articleSchema","Schema","title","type","String","required","summary","content","imageUrl","date","categories","published","Boolean","project","Article","model","getAllPublishedArticles","limit","offset","length","total","find","$in","countDocuments","articles","sort","skip","error","Error","message","getArticleById","id","article","findOne","_id","getArticlesByDate","from","to","$gte","$lte","getAllProjects","getAllArticles","createArticle","input","create","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/","sources":["article.js"],"sourcesContent":["const mongoose = require('mongoose');\n\nconst articleSchema = new mongoose.Schema({\n\n    title:{\n        type: String,\n        required: true\n    },\n    summary:{\n        type: String,\n        required: true\n    },\n    content:{\n        type: String,\n        required: true\n    },\n    imageUrl:{\n        type: String,\n        required: true\n    },\n    date:{\n        type: String,\n        required: true\n    },\n    categories:{\n        type: [String],\n        required: false\n    },\n    published:{\n        type: Boolean,\n        required: true\n    },\n    project:{\n        type: Boolean,\n        required: true\n    }\n})\n\nconst Article = mongoose.model('Article', articleSchema);\n\nArticle.getAllPublishedArticles = async (categories, limit, offset) => {\n   \n    if(categories && categories.length > 0){\n        try {\n            const total = await Article.find({ published: true, categories: { $in: categories } }).countDocuments();\n            const articles = await Article.find({ published: true, categories: { $in: categories } })\n            .sort({date: -1})\n            .skip(offset)\n            .limit(limit);\n            return {articles, total};\n          } catch (error) {\n            throw new Error('Error fetching published articles: ' + error.message);\n          }\n    }\n    else {\n        try {\n            const total = await Article.find({ published: true }).countDocuments();\n            const articles = await Article.find({ published: true })\n            .sort({date: -1})\n            .skip(offset)\n            .limit(limit);\n            return {articles, total};\n          } catch (error) {\n            throw new Error('Error fetching published articles: ' + error.message);\n          }\n    }\n}\n  \n  Article.getArticleById = async (id) => {\n    try {\n      const article = await Article.findOne({ _id: id });\n      return article;\n    } catch (error) {\n      throw new Error('Error fetching article by ID: ' + error.message);\n    }\n  };\n  \n  Article.getArticlesByDate = async (from, to) => {\n    try {\n      const articles = await Article.find({ date: { $gte: from, $lte: to } });\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching articles by date range: ' + error.message);\n    }\n  };\n  \n  Article.getAllProjects = async () => {\n    try {\n      const articles = await Article.find({ project: true });\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching project articles: ' + error.message);\n    }\n  };\n  \n  Article.getAllArticles = async () => {\n    try {\n      const articles = await Article.find({});\n      return articles;\n    } catch (error) {\n      throw new Error('Error fetching all articles: ' + error.message);\n    }\n  };\n  \n  Article.createArticle = async (input) => {\n    try {\n      const article = await Article.create(input);\n      return article;\n    } catch (error) {\n      throw new Error('Error creating article: ' + error.message);\n    }\n  };\n module.exports = Article;"],"mappings":"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"}},"mtime":1706138469775},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/categoryResolvers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const Category = require('../../data/models/category');\n\nconst categoryResolvers = {\n  Query: {\n    getCategories: async () => {\n      try {\n        const categories = await Category.find({});\n        return categories;\n      } catch (error) {\n        throw new Error('Error fetching categories: ' + error.message);\n      }\n    }\n  },\n  Mutation: {\n    createCategory: async (_, {\n      categoryName\n    }) => {\n      try {\n        const newCategory = {\n          name: categoryName\n        };\n        const category = await Category.create(newCategory);\n        return category;\n      } catch (error) {\n        throw new Error('Error creating category: ' + error.message);\n      }\n    }\n  }\n};\nmodule.exports = categoryResolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDYXRlZ29yeSIsInJlcXVpcmUiLCJjYXRlZ29yeVJlc29sdmVycyIsIlF1ZXJ5IiwiZ2V0Q2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJmaW5kIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJNdXRhdGlvbiIsImNyZWF0ZUNhdGVnb3J5IiwiXyIsImNhdGVnb3J5TmFtZSIsIm5ld0NhdGVnb3J5IiwibmFtZSIsImNhdGVnb3J5IiwiY3JlYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZ3JhcGhxbC9yZXNvbHZlcnMvIiwic291cmNlcyI6WyJjYXRlZ29yeVJlc29sdmVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDYXRlZ29yeSA9IHJlcXVpcmUoJy4uLy4uL2RhdGEvbW9kZWxzL2NhdGVnb3J5Jyk7XG5cbmNvbnN0IGNhdGVnb3J5UmVzb2x2ZXJzID0ge1xuICAgIFF1ZXJ5OiB7XG4gICAgICBnZXRDYXRlZ29yaWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IGF3YWl0IENhdGVnb3J5LmZpbmQoe30pO1xuICAgICAgICAgIHJldHVybiBjYXRlZ29yaWVzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZmV0Y2hpbmcgY2F0ZWdvcmllczogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sXG4gICAgTXV0YXRpb246IHtcbiAgICAgICAgY3JlYXRlQ2F0ZWdvcnk6IGFzeW5jIChfLCB7IGNhdGVnb3J5TmFtZSB9KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhdGVnb3J5ID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjYXRlZ29yeU5hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gYXdhaXQgQ2F0ZWdvcnkuY3JlYXRlKG5ld0NhdGVnb3J5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0ZWdvcnk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYXRpbmcgY2F0ZWdvcnk6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2F0ZWdvcnlSZXNvbHZlcnM7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLDRCQUFELENBQXhCOztBQUVBLE1BQU1DLGlCQUFpQixHQUFHO0VBQ3RCQyxLQUFLLEVBQUU7SUFDTEMsYUFBYSxFQUFFLFlBQVk7TUFDekIsSUFBSTtRQUNGLE1BQU1DLFVBQVUsR0FBRyxNQUFNTCxRQUFRLENBQUNNLElBQVQsQ0FBYyxFQUFkLENBQXpCO1FBQ0EsT0FBT0QsVUFBUDtNQUNELENBSEQsQ0FHRSxPQUFPRSxLQUFQLEVBQWM7UUFDZCxNQUFNLElBQUlDLEtBQUosQ0FBVSxnQ0FBZ0NELEtBQUssQ0FBQ0UsT0FBaEQsQ0FBTjtNQUNEO0lBQ0Y7RUFSSSxDQURlO0VBV3RCQyxRQUFRLEVBQUU7SUFDTkMsY0FBYyxFQUFFLE9BQU9DLENBQVAsRUFBVTtNQUFFQztJQUFGLENBQVYsS0FBK0I7TUFDM0MsSUFBSTtRQUNBLE1BQU1DLFdBQVcsR0FBRztVQUNoQkMsSUFBSSxFQUFFRjtRQURVLENBQXBCO1FBR0EsTUFBTUcsUUFBUSxHQUFHLE1BQU1oQixRQUFRLENBQUNpQixNQUFULENBQWdCSCxXQUFoQixDQUF2QjtRQUNBLE9BQU9FLFFBQVA7TUFDSCxDQU5ELENBTUUsT0FBT1QsS0FBUCxFQUFjO1FBQ1osTUFBTSxJQUFJQyxLQUFKLENBQVUsOEJBQThCRCxLQUFLLENBQUNFLE9BQTlDLENBQU47TUFDSDtJQUNKO0VBWEs7QUFYWSxDQUExQjtBQTBCQVMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCakIsaUJBQWpCIn0=","map":{"version":3,"names":["Category","require","categoryResolvers","Query","getCategories","categories","find","error","Error","message","Mutation","createCategory","_","categoryName","newCategory","name","category","create","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["categoryResolvers.js"],"sourcesContent":["const Category = require('../../data/models/category');\n\nconst categoryResolvers = {\n    Query: {\n      getCategories: async () => {\n        try {\n          const categories = await Category.find({});\n          return categories;\n        } catch (error) {\n          throw new Error('Error fetching categories: ' + error.message);\n        }\n      },\n    },\n    Mutation: {\n        createCategory: async (_, { categoryName }) => {\n            try {\n                const newCategory = {\n                    name: categoryName,\n                }\n                const category = await Category.create(newCategory);\n                return category;\n            } catch (error) {\n                throw new Error('Error creating category: ' + error.message);\n            }\n        },\n    }\n}\n\nmodule.exports = categoryResolvers;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,4BAAD,CAAxB;;AAEA,MAAMC,iBAAiB,GAAG;EACtBC,KAAK,EAAE;IACLC,aAAa,EAAE,YAAY;MACzB,IAAI;QACF,MAAMC,UAAU,GAAG,MAAML,QAAQ,CAACM,IAAT,CAAc,EAAd,CAAzB;QACA,OAAOD,UAAP;MACD,CAHD,CAGE,OAAOE,KAAP,EAAc;QACd,MAAM,IAAIC,KAAJ,CAAU,gCAAgCD,KAAK,CAACE,OAAhD,CAAN;MACD;IACF;EARI,CADe;EAWtBC,QAAQ,EAAE;IACNC,cAAc,EAAE,OAAOC,CAAP,EAAU;MAAEC;IAAF,CAAV,KAA+B;MAC3C,IAAI;QACA,MAAMC,WAAW,GAAG;UAChBC,IAAI,EAAEF;QADU,CAApB;QAGA,MAAMG,QAAQ,GAAG,MAAMhB,QAAQ,CAACiB,MAAT,CAAgBH,WAAhB,CAAvB;QACA,OAAOE,QAAP;MACH,CAND,CAME,OAAOT,KAAP,EAAc;QACZ,MAAM,IAAIC,KAAJ,CAAU,8BAA8BD,KAAK,CAACE,OAA9C,CAAN;MACH;IACJ;EAXK;AAXY,CAA1B;AA0BAS,MAAM,CAACC,OAAP,GAAiBjB,iBAAjB"}},"mtime":1704486732316},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/category.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require(\"mongoose\");\n\nconst categorySchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: true\n  }\n});\nconst Category = mongoose.model('Category', categorySchema);\nmodule.exports = Category;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjYXRlZ29yeVNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJDYXRlZ29yeSIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZGF0YS9tb2RlbHMvIiwic291cmNlcyI6WyJjYXRlZ29yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuXG5cbmNvbnN0IGNhdGVnb3J5U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgbmFtZTp7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9XG59KTtcblxuY29uc3QgQ2F0ZWdvcnkgPSBtb25nb29zZS5tb2RlbCgnQ2F0ZWdvcnknLCBjYXRlZ29yeVNjaGVtYSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2F0ZWdvcnk7Il0sIm1hcHBpbmdzIjoiQUFDQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUdBLE1BQU1DLGNBQWMsR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQWIsQ0FBb0I7RUFDdkNDLElBQUksRUFBQztJQUNEQyxJQUFJLEVBQUVDLE1BREw7SUFFREMsUUFBUSxFQUFFO0VBRlQ7QUFEa0MsQ0FBcEIsQ0FBdkI7QUFPQSxNQUFNQyxRQUFRLEdBQUdSLFFBQVEsQ0FBQ1MsS0FBVCxDQUFlLFVBQWYsRUFBMkJQLGNBQTNCLENBQWpCO0FBRUFRLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsUUFBakIifQ==","map":{"version":3,"names":["mongoose","require","categorySchema","Schema","name","type","String","required","Category","model","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/","sources":["category.js"],"sourcesContent":["\nconst mongoose = require(\"mongoose\");\n\n\nconst categorySchema = new mongoose.Schema({\n    name:{\n        type: String,\n        required: true\n    }\n});\n\nconst Category = mongoose.model('Category', categorySchema);\n\nmodule.exports = Category;"],"mappings":"AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAGA,MAAMC,cAAc,GAAG,IAAIF,QAAQ,CAACG,MAAb,CAAoB;EACvCC,IAAI,EAAC;IACDC,IAAI,EAAEC,MADL;IAEDC,QAAQ,EAAE;EAFT;AADkC,CAApB,CAAvB;AAOA,MAAMC,QAAQ,GAAGR,QAAQ,CAACS,KAAT,CAAe,UAAf,EAA2BP,cAA3B,CAAjB;AAEAQ,MAAM,CAACC,OAAP,GAAiBH,QAAjB"}},"mtime":1704486739608},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/userResolvers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const User = require(\"../../data/models/user\");\n\nconst jwt = require(\"jsonwebtoken\");\n\nconst createToken = user => {\n  const token = jwt.sign({\n    username: user.username,\n    id: user.id\n  }, process.env.SECRET, {\n    expiresIn: \"1d\"\n  });\n  return token;\n};\n\nconst userResolvers = {\n  Query: {\n    verifyToken: async (_, args, context) => {\n      try {\n        const {\n          token\n        } = context;\n        console.log(token);\n\n        if (!token) {\n          return {\n            authenticated: false\n          };\n        }\n\n        const decoded = jwt.verify(token, process.env.SECRET);\n        const user = await User.findOne({\n          username: decoded.username\n        });\n\n        if (!user) {\n          return {\n            authenticated: false\n          };\n        }\n\n        return {\n          authenticated: true\n        };\n      } catch (error) {\n        return {\n          authenticated: false\n        };\n        ;\n      }\n    }\n  },\n  Mutation: {\n    createUser: async (_, {\n      input\n    }, {\n      res\n    }) => {\n      try {\n        const newUser = {\n          username: input.username,\n          firstName: input.firstName,\n          lastName: input.lastName,\n          password: input.password\n        };\n        const user = await User.createUser(newUser);\n        token = createToken(user);\n        res.cookie(\"token\", token, {\n          httpOnly: true,\n          secure: true,\n          // use secure in production\n          sameSite: \"lax\",\n          maxAge: 24 * 60 * 60 * 1000,\n          // 1 day\n          path: \"/\"\n        });\n        return {\n          token: token\n        };\n      } catch (error) {\n        throw new Error(\"Error creating user: \" + error.message);\n      }\n    },\n    login: async (_, {\n      username,\n      password\n    }, {\n      res\n    }) => {\n      try {\n        console.log(username);\n        const user = await User.findOne({\n          username: username\n        });\n        console.log(user);\n\n        if (user && User.verifyPassword(password, user.password)) {\n          token = createToken(user);\n          res.cookie(\"token\", token, {\n            httpOnly: true,\n            secure: true,\n            // use secure in production\n            sameSite: \"none\",\n            maxAge: 24 * 60 * 60 * 1000,\n            // 1 day\n            path: \"/\"\n          });\n          return {\n            token: token\n          };\n        } else {\n          throw new Error(\"Wrong password\");\n        }\n      } catch (error) {\n        throw new Error(\"Error fetching users: \" + error.message);\n      }\n    }\n  }\n};\nmodule.exports = userResolvers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsImp3dCIsImNyZWF0ZVRva2VuIiwidXNlciIsInRva2VuIiwic2lnbiIsInVzZXJuYW1lIiwiaWQiLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUIiwiZXhwaXJlc0luIiwidXNlclJlc29sdmVycyIsIlF1ZXJ5IiwidmVyaWZ5VG9rZW4iLCJfIiwiYXJncyIsImNvbnRleHQiLCJjb25zb2xlIiwibG9nIiwiYXV0aGVudGljYXRlZCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJmaW5kT25lIiwiZXJyb3IiLCJNdXRhdGlvbiIsImNyZWF0ZVVzZXIiLCJpbnB1dCIsInJlcyIsIm5ld1VzZXIiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBhc3N3b3JkIiwiY29va2llIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJzYW1lU2l0ZSIsIm1heEFnZSIsInBhdGgiLCJFcnJvciIsIm1lc3NhZ2UiLCJsb2dpbiIsInZlcmlmeVBhc3N3b3JkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2phbWVzc3RvcnIvUHJvamVjdHMvUG9ydGZvbGlvL3BvcnRmb2xpby1zZXJ2aWNlcy9zcmMvZ3JhcGhxbC9yZXNvbHZlcnMvIiwic291cmNlcyI6WyJ1c2VyUmVzb2x2ZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi4vLi4vZGF0YS9tb2RlbHMvdXNlclwiKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XG5cbmNvbnN0IGNyZWF0ZVRva2VuID0gKHVzZXIpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICB7IHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLCBpZDogdXNlci5pZCB9LFxuICAgIHByb2Nlc3MuZW52LlNFQ1JFVCxcbiAgICB7IGV4cGlyZXNJbjogXCIxZFwiIH1cbiAgKTtcbiAgcmV0dXJuIHRva2VuO1xufTtcblxuY29uc3QgdXNlclJlc29sdmVycyA9IHtcbiAgUXVlcnk6IHtcbiAgICB2ZXJpZnlUb2tlbjogYXN5bmMgKF8sIGFyZ3MsIGNvbnRleHQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHt0b2tlbn0gPSBjb250ZXh0O1xuICAgICAgICBjb25zb2xlLmxvZyh0b2tlbik7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICByZXR1cm4ge2F1dGhlbnRpY2F0ZWQ6IGZhbHNlfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuU0VDUkVUKTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBkZWNvZGVkLnVzZXJuYW1lIH0pO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICByZXR1cm4ge2F1dGhlbnRpY2F0ZWQ6IGZhbHNlfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge2F1dGhlbnRpY2F0ZWQ6IHRydWV9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHthdXRoZW50aWNhdGVkOiBmYWxzZX07O1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgTXV0YXRpb246IHtcbiAgICBjcmVhdGVVc2VyOiBhc3luYyAoXywgeyBpbnB1dCB9LCB7IHJlcyB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXdVc2VyID0ge1xuICAgICAgICAgIHVzZXJuYW1lOiBpbnB1dC51c2VybmFtZSxcbiAgICAgICAgICBmaXJzdE5hbWU6IGlucHV0LmZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0TmFtZTogaW5wdXQubGFzdE5hbWUsXG4gICAgICAgICAgcGFzc3dvcmQ6IGlucHV0LnBhc3N3b3JkLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZVVzZXIobmV3VXNlcik7XG4gICAgICAgIHRva2VuID0gY3JlYXRlVG9rZW4odXNlcik7XG4gICAgICAgIHJlcy5jb29raWUoXCJ0b2tlblwiLCB0b2tlbiwge1xuICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgIHNlY3VyZTogdHJ1ZSwgLy8gdXNlIHNlY3VyZSBpbiBwcm9kdWN0aW9uXG4gICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgICAgbWF4QWdlOiAyNCAqIDYwICogNjAgKiAxMDAwLCAvLyAxIGRheVxuICAgICAgICAgIHBhdGg6IFwiL1wiLFxuICAgICAgICB9KTsgXG4gICAgICAgIHJldHVybiB7IHRva2VuOiB0b2tlbiB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY3JlYXRpbmcgdXNlcjogXCIgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGxvZ2luOiBhc3luYyAoXywgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSwgeyByZXMgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2codXNlcm5hbWUpO1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWU6IHVzZXJuYW1lIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICAgICAgaWYgKHVzZXIgJiYgVXNlci52ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgdXNlci5wYXNzd29yZCkpIHtcbiAgICAgICAgICB0b2tlbiA9IGNyZWF0ZVRva2VuKHVzZXIpO1xuICAgICAgICAgICByZXMuY29va2llKFwidG9rZW5cIiwgdG9rZW4sIHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgc2VjdXJlOiB0cnVlLCAvLyB1c2Ugc2VjdXJlIGluIHByb2R1Y3Rpb25cbiAgICAgICAgICAgIHNhbWVTaXRlOiBcIm5vbmVcIixcbiAgICAgICAgICAgIG1heEFnZTogMjQgKiA2MCAqIDYwICogMTAwMCwgLy8gMSBkYXlcbiAgICAgICAgICAgIHBhdGg6IFwiL1wiLFxuICAgICAgICAgIH0pOyAgXG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHsgdG9rZW46IHRva2VuIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV3JvbmcgcGFzc3dvcmRcIik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIHVzZXJzOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZXJSZXNvbHZlcnM7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLHdCQUFELENBQXBCOztBQUNBLE1BQU1DLEdBQUcsR0FBR0QsT0FBTyxDQUFDLGNBQUQsQ0FBbkI7O0FBRUEsTUFBTUUsV0FBVyxHQUFJQyxJQUFELElBQVU7RUFDNUIsTUFBTUMsS0FBSyxHQUFHSCxHQUFHLENBQUNJLElBQUosQ0FDWjtJQUFFQyxRQUFRLEVBQUVILElBQUksQ0FBQ0csUUFBakI7SUFBMkJDLEVBQUUsRUFBRUosSUFBSSxDQUFDSTtFQUFwQyxDQURZLEVBRVpDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxNQUZBLEVBR1o7SUFBRUMsU0FBUyxFQUFFO0VBQWIsQ0FIWSxDQUFkO0VBS0EsT0FBT1AsS0FBUDtBQUNELENBUEQ7O0FBU0EsTUFBTVEsYUFBYSxHQUFHO0VBQ3BCQyxLQUFLLEVBQUU7SUFDTEMsV0FBVyxFQUFFLE9BQU9DLENBQVAsRUFBVUMsSUFBVixFQUFnQkMsT0FBaEIsS0FBNEI7TUFDdkMsSUFBSTtRQUNGLE1BQU07VUFBQ2I7UUFBRCxJQUFVYSxPQUFoQjtRQUNBQyxPQUFPLENBQUNDLEdBQVIsQ0FBWWYsS0FBWjs7UUFDQSxJQUFJLENBQUNBLEtBQUwsRUFBWTtV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","map":{"version":3,"names":["User","require","jwt","createToken","user","token","sign","username","id","process","env","SECRET","expiresIn","userResolvers","Query","verifyToken","_","args","context","console","log","authenticated","decoded","verify","findOne","error","Mutation","createUser","input","res","newUser","firstName","lastName","password","cookie","httpOnly","secure","sameSite","maxAge","path","Error","message","login","verifyPassword","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/graphql/resolvers/","sources":["userResolvers.js"],"sourcesContent":["const User = require(\"../../data/models/user\");\nconst jwt = require(\"jsonwebtoken\");\n\nconst createToken = (user) => {\n  const token = jwt.sign(\n    { username: user.username, id: user.id },\n    process.env.SECRET,\n    { expiresIn: \"1d\" }\n  );\n  return token;\n};\n\nconst userResolvers = {\n  Query: {\n    verifyToken: async (_, args, context) => {\n      try {\n        const {token} = context;\n        console.log(token);\n        if (!token) {\n          return {authenticated: false};\n        }\n        const decoded = jwt.verify(token, process.env.SECRET);\n        const user = await User.findOne({ username: decoded.username });\n        if (!user) {\n          return {authenticated: false};\n        }\n        return {authenticated: true};\n      } catch (error) {\n        return {authenticated: false};;\n      }\n    }\n  },\n  Mutation: {\n    createUser: async (_, { input }, { res }) => {\n      try {\n        const newUser = {\n          username: input.username,\n          firstName: input.firstName,\n          lastName: input.lastName,\n          password: input.password,\n        };\n\n        const user = await User.createUser(newUser);\n        token = createToken(user);\n        res.cookie(\"token\", token, {\n          httpOnly: true,\n          secure: true, // use secure in production\n          sameSite: \"lax\",\n          maxAge: 24 * 60 * 60 * 1000, // 1 day\n          path: \"/\",\n        }); \n        return { token: token };\n      } catch (error) {\n        throw new Error(\"Error creating user: \" + error.message);\n      }\n    },\n    login: async (_, { username, password }, { res }) => {\n      try {\n        console.log(username);\n        const user = await User.findOne({ username: username });\n        console.log(user);\n        if (user && User.verifyPassword(password, user.password)) {\n          token = createToken(user);\n           res.cookie(\"token\", token, {\n            httpOnly: true,\n            secure: true, // use secure in production\n            sameSite: \"none\",\n            maxAge: 24 * 60 * 60 * 1000, // 1 day\n            path: \"/\",\n          });  \n          \n          return { token: token };\n        } else {\n          throw new Error(\"Wrong password\");\n        }\n      } catch (error) {\n        throw new Error(\"Error fetching users: \" + error.message);\n      }\n    },\n  },\n};\n\nmodule.exports = userResolvers;\n"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,wBAAD,CAApB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,cAAD,CAAnB;;AAEA,MAAME,WAAW,GAAIC,IAAD,IAAU;EAC5B,MAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CACZ;IAAEC,QAAQ,EAAEH,IAAI,CAACG,QAAjB;IAA2BC,EAAE,EAAEJ,IAAI,CAACI;EAApC,CADY,EAEZC,OAAO,CAACC,GAAR,CAAYC,MAFA,EAGZ;IAAEC,SAAS,EAAE;EAAb,CAHY,CAAd;EAKA,OAAOP,KAAP;AACD,CAPD;;AASA,MAAMQ,aAAa,GAAG;EACpBC,KAAK,EAAE;IACLC,WAAW,EAAE,OAAOC,CAAP,EAAUC,IAAV,EAAgBC,OAAhB,KAA4B;MACvC,IAAI;QACF,MAAM;UAACb;QAAD,IAAUa,OAAhB;QACAC,OAAO,CAACC,GAAR,CAAYf,KAAZ;;QACA,IAAI,CAACA,KAAL,EAAY;UACV,OAAO;YAACgB,aAAa,EAAE;UAAhB,CAAP;QACD;;QACD,MAAMC,OAAO,GAAGpB,GAAG,CAACqB,MAAJ,CAAWlB,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,MAA9B,CAAhB;QACA,MAAMP,IAAI,GAAG,MAAMJ,IAAI,CAACwB,OAAL,CAAa;UAAEjB,QAAQ,EAAEe,OAAO,CAACf;QAApB,CAAb,CAAnB;;QACA,IAAI,CAACH,IAAL,EAAW;UACT,OAAO;YAACiB,aAAa,EAAE;UAAhB,CAAP;QACD;;QACD,OAAO;UAACA,aAAa,EAAE;QAAhB,CAAP;MACD,CAZD,CAYE,OAAOI,KAAP,EAAc;QACd,OAAO;UAACJ,aAAa,EAAE;QAAhB,CAAP;QAA8B;MAC/B;IACF;EAjBI,CADa;EAoBpBK,QAAQ,EAAE;IACRC,UAAU,EAAE,OAAOX,CAAP,EAAU;MAAEY;IAAF,CAAV,EAAqB;MAAEC;IAAF,CAArB,KAAiC;MAC3C,IAAI;QACF,MAAMC,OAAO,GAAG;UACdvB,QAAQ,EAAEqB,KAAK,CAACrB,QADF;UAEdwB,SAAS,EAAEH,KAAK,CAACG,SAFH;UAGdC,QAAQ,EAAEJ,KAAK,CAACI,QAHF;UAIdC,QAAQ,EAAEL,KAAK,CAACK;QAJF,CAAhB;QAOA,MAAM7B,IAAI,GAAG,MAAMJ,IAAI,CAAC2B,UAAL,CAAgBG,OAAhB,CAAnB;QACAzB,KAAK,GAAGF,WAAW,CAACC,IAAD,CAAnB;QACAyB,GAAG,CAACK,MAAJ,CAAW,OAAX,EAAoB7B,KAApB,EAA2B;UACzB8B,QAAQ,EAAE,IADe;UAEzBC,MAAM,EAAE,IAFiB;UAEX;UACdC,QAAQ,EAAE,KAHe;UAIzBC,MAAM,EAAE,KAAK,EAAL,GAAU,EAAV,GAAe,IAJE;UAII;UAC7BC,IAAI,EAAE;QALmB,CAA3B;QAOA,OAAO;UAAElC,KAAK,EAAEA;QAAT,CAAP;MACD,CAlBD,CAkBE,OAAOoB,KAAP,EAAc;QACd,MAAM,IAAIe,KAAJ,CAAU,0BAA0Bf,KAAK,CAACgB,OAA1C,CAAN;MACD;IACF,CAvBO;IAwBRC,KAAK,EAAE,OAAO1B,CAAP,EAAU;MAAET,QAAF;MAAY0B;IAAZ,CAAV,EAAkC;MAAEJ;IAAF,CAAlC,KAA8C;MACnD,IAAI;QACFV,OAAO,CAACC,GAAR,CAAYb,QAAZ;QACA,MAAMH,IAAI,GAAG,MAAMJ,IAAI,CAACwB,OAAL,CAAa;UAAEjB,QAAQ,EAAEA;QAAZ,CAAb,CAAnB;QACAY,OAAO,CAACC,GAAR,CAAYhB,IAAZ;;QACA,IAAIA,IAAI,IAAIJ,IAAI,CAAC2C,cAAL,CAAoBV,QAApB,EAA8B7B,IAAI,CAAC6B,QAAnC,CAAZ,EAA0D;UACxD5B,KAAK,GAAGF,WAAW,CAACC,IAAD,CAAnB;UACCyB,GAAG,CAACK,MAAJ,CAAW,OAAX,EAAoB7B,KAApB,EAA2B;YAC1B8B,QAAQ,EAAE,IADgB;YAE1BC,MAAM,EAAE,IAFkB;YAEZ;YACdC,QAAQ,EAAE,MAHgB;YAI1BC,MAAM,EAAE,KAAK,EAAL,GAAU,EAAV,GAAe,IAJG;YAIG;YAC7BC,IAAI,EAAE;UALoB,CAA3B;UAQD,OAAO;YAAElC,KAAK,EAAEA;UAAT,CAAP;QACD,CAXD,MAWO;UACL,MAAM,IAAImC,KAAJ,CAAU,gBAAV,CAAN;QACD;MACF,CAlBD,CAkBE,OAAOf,KAAP,EAAc;QACd,MAAM,IAAIe,KAAJ,CAAU,2BAA2Bf,KAAK,CAACgB,OAA3C,CAAN;MACD;IACF;EA9CO;AApBU,CAAtB;AAsEAG,MAAM,CAACC,OAAP,GAAiBhC,aAAjB"}},"mtime":1705184711734},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require('mongoose');\n\nconst bcrypt = require('bcrypt');\n\nconst userSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    required: true\n  },\n  firstName: {\n    type: String,\n    required: false\n  },\n  lastName: {\n    type: String,\n    required: false\n  },\n  password: {\n    type: String,\n    required: true\n  }\n});\nconst User = mongoose.model('User', userSchema);\n\nUser.createUser = async newUser => {\n  try {\n    const user = new User({\n      username: newUser.username,\n      firstName: newUser.firstName,\n      lastName: newUser.lastName,\n      password: await User.generatePassword(newUser.password)\n    });\n    const response = await user.save();\n    return response;\n  } catch (error) {\n    throw new Error('Error creating user: ' + error.message);\n  }\n};\n\nUser.verifyPassword = async (password, hash) => {\n  const match = await bcrypt.compare(password, hash);\n  return match;\n};\n\nUser.generatePassword = async password => {\n  const saltRounds = 10;\n  const hash = await bcrypt.hash(password, saltRounds);\n  return hash;\n};\n\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJiY3J5cHQiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBhc3N3b3JkIiwiVXNlciIsIm1vZGVsIiwiY3JlYXRlVXNlciIsIm5ld1VzZXIiLCJ1c2VyIiwiZ2VuZXJhdGVQYXNzd29yZCIsInJlc3BvbnNlIiwic2F2ZSIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwidmVyaWZ5UGFzc3dvcmQiLCJoYXNoIiwibWF0Y2giLCJjb21wYXJlIiwic2FsdFJvdW5kcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9qYW1lc3N0b3JyL1Byb2plY3RzL1BvcnRmb2xpby9wb3J0Zm9saW8tc2VydmljZXMvc3JjL2RhdGEvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcblxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHVzZXJuYW1lOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgZmlyc3ROYW1lOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICB9LFxuICAgIGxhc3ROYW1lOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogZmFsc2VcbiAgICB9LFxuICAgIHBhc3N3b3JkOntcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1cbn0pO1xuXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcblxuVXNlci5jcmVhdGVVc2VyID0gYXN5bmMgKG5ld1VzZXIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IG5ld1VzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiBuZXdVc2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogbmV3VXNlci5sYXN0TmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBhd2FpdCBVc2VyLmdlbmVyYXRlUGFzc3dvcmQobmV3VXNlci5wYXNzd29yZClcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbn1cblxuVXNlci52ZXJpZnlQYXNzd29yZCA9IGFzeW5jIChwYXNzd29yZCwgaGFzaCkgPT4ge1xuICAgIGNvbnN0IG1hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpO1xuICAgIHJldHVybiBtYXRjaDtcbn1cblxuVXNlci5nZW5lcmF0ZVBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkKSA9PiB7XG4gICAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XG4gICAgcmV0dXJuIGhhc2g7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVXNlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxRQUFELENBQXRCOztBQUVBLE1BQU1FLFVBQVUsR0FBRyxJQUFJSCxRQUFRLENBQUNJLE1BQWIsQ0FBb0I7RUFDbkNDLFFBQVEsRUFBQztJQUNMQyxJQUFJLEVBQUVDLE1BREQ7SUFFTEMsUUFBUSxFQUFFO0VBRkwsQ0FEMEI7RUFLbkNDLFNBQVMsRUFBQztJQUNOSCxJQUFJLEVBQUVDLE1BREE7SUFFTkMsUUFBUSxFQUFFO0VBRkosQ0FMeUI7RUFTbkNFLFFBQVEsRUFBQztJQUNMSixJQUFJLEVBQUVDLE1BREQ7SUFFTEMsUUFBUSxFQUFFO0VBRkwsQ0FUMEI7RUFhbkNHLFFBQVEsRUFBQztJQUNMTCxJQUFJLEVBQUVDLE1BREQ7SUFFTEMsUUFBUSxFQUFFO0VBRkw7QUFiMEIsQ0FBcEIsQ0FBbkI7QUFtQkEsTUFBTUksSUFBSSxHQUFHWixRQUFRLENBQUNhLEtBQVQsQ0FBZSxNQUFmLEVBQXVCVixVQUF2QixDQUFiOztBQUVBUyxJQUFJLENBQUNFLFVBQUwsR0FBa0IsTUFBT0MsT0FBUCxJQUFtQjtFQUNqQyxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLElBQUlKLElBQUosQ0FDVDtNQUNJUCxRQUFRLEVBQUVVLE9BQU8sQ0FBQ1YsUUFEdEI7TUFFSUksU0FBUyxFQUFFTSxPQUFPLENBQUNOLFNBRnZCO01BR0lDLFFBQVEsRUFBRUssT0FBTyxDQUFDTCxRQUh0QjtNQUlBQyxRQUFRLEVBQUUsTUFBTUMsSUFBSSxDQUFDSyxnQkFBTCxDQUFzQkYsT0FBTyxDQUFDSixRQUE5QjtJQUpoQixDQURTLENBQWI7SUFPQSxNQUFNTyxRQUFRLEdBQUcsTUFBTUYsSUFBSSxDQUFDRyxJQUFMLEVBQXZCO0lBQ0EsT0FBT0QsUUFBUDtFQUNILENBVkQsQ0FVRSxPQUFPRSxLQUFQLEVBQWM7SUFDWixNQUFNLElBQUlDLEtBQUosQ0FBVSwwQkFBMEJELEtBQUssQ0FBQ0UsT0FBMUMsQ0FBTjtFQUNIO0FBQ0osQ0FkRDs7QUFnQkFWLElBQUksQ0FBQ1csY0FBTCxHQUFzQixPQUFPWixRQUFQLEVBQWlCYSxJQUFqQixLQUEwQjtFQUM1QyxNQUFNQyxLQUFLLEdBQUcsTUFBTXZCLE1BQU0sQ0FBQ3dCLE9BQVAsQ0FBZWYsUUFBZixFQUF5QmEsSUFBekIsQ0FBcEI7RUFDQSxPQUFPQyxLQUFQO0FBQ0gsQ0FIRDs7QUFLQWIsSUFBSSxDQUFDSyxnQkFBTCxHQUF3QixNQUFPTixRQUFQLElBQW9CO0VBQ3hDLE1BQU1nQixVQUFVLEdBQUcsRUFBbkI7RUFDQSxNQUFNSCxJQUFJLEdBQUcsTUFBTXRCLE1BQU0sQ0FBQ3NCLElBQVAsQ0FBWWIsUUFBWixFQUFzQmdCLFVBQXRCLENBQW5CO0VBQ0EsT0FBT0gsSUFBUDtBQUNILENBSkQ7O0FBTUFJLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmpCLElBQWpCIn0=","map":{"version":3,"names":["mongoose","require","bcrypt","userSchema","Schema","username","type","String","required","firstName","lastName","password","User","model","createUser","newUser","user","generatePassword","response","save","error","Error","message","verifyPassword","hash","match","compare","saltRounds","module","exports"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/models/","sources":["user.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst bcrypt = require('bcrypt');\n\nconst userSchema = new mongoose.Schema({\n    username:{\n        type: String,\n        required: true\n    },\n    firstName:{\n        type: String,\n        required: false\n    },\n    lastName:{\n        type: String,\n        required: false\n    },\n    password:{\n        type: String,\n        required: true\n    }\n});\n\nconst User = mongoose.model('User', userSchema);\n\nUser.createUser = async (newUser) => {\n    try {\n        const user = new User(\n            {\n                username: newUser.username,\n                firstName: newUser.firstName,\n                lastName: newUser.lastName,\n            password: await User.generatePassword(newUser.password)\n        })\n        const response = await user.save();\n        return response;\n    } catch (error) {\n        throw new Error('Error creating user: ' + error.message);\n    }\n}\n\nUser.verifyPassword = async (password, hash) => {\n    const match = await bcrypt.compare(password, hash);\n    return match;\n}\n\nUser.generatePassword = async (password) => {\n    const saltRounds = 10;\n    const hash = await bcrypt.hash(password, saltRounds);\n    return hash;\n}\n\nmodule.exports = User;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAME,UAAU,GAAG,IAAIH,QAAQ,CAACI,MAAb,CAAoB;EACnCC,QAAQ,EAAC;IACLC,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL,CAD0B;EAKnCC,SAAS,EAAC;IACNH,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE;EAFJ,CALyB;EASnCE,QAAQ,EAAC;IACLJ,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL,CAT0B;EAanCG,QAAQ,EAAC;IACLL,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;EAFL;AAb0B,CAApB,CAAnB;AAmBA,MAAMI,IAAI,GAAGZ,QAAQ,CAACa,KAAT,CAAe,MAAf,EAAuBV,UAAvB,CAAb;;AAEAS,IAAI,CAACE,UAAL,GAAkB,MAAOC,OAAP,IAAmB;EACjC,IAAI;IACA,MAAMC,IAAI,GAAG,IAAIJ,IAAJ,CACT;MACIP,QAAQ,EAAEU,OAAO,CAACV,QADtB;MAEII,SAAS,EAAEM,OAAO,CAACN,SAFvB;MAGIC,QAAQ,EAAEK,OAAO,CAACL,QAHtB;MAIAC,QAAQ,EAAE,MAAMC,IAAI,CAACK,gBAAL,CAAsBF,OAAO,CAACJ,QAA9B;IAJhB,CADS,CAAb;IAOA,MAAMO,QAAQ,GAAG,MAAMF,IAAI,CAACG,IAAL,EAAvB;IACA,OAAOD,QAAP;EACH,CAVD,CAUE,OAAOE,KAAP,EAAc;IACZ,MAAM,IAAIC,KAAJ,CAAU,0BAA0BD,KAAK,CAACE,OAA1C,CAAN;EACH;AACJ,CAdD;;AAgBAV,IAAI,CAACW,cAAL,GAAsB,OAAOZ,QAAP,EAAiBa,IAAjB,KAA0B;EAC5C,MAAMC,KAAK,GAAG,MAAMvB,MAAM,CAACwB,OAAP,CAAef,QAAf,EAAyBa,IAAzB,CAApB;EACA,OAAOC,KAAP;AACH,CAHD;;AAKAb,IAAI,CAACK,gBAAL,GAAwB,MAAON,QAAP,IAAoB;EACxC,MAAMgB,UAAU,GAAG,EAAnB;EACA,MAAMH,IAAI,GAAG,MAAMtB,MAAM,CAACsB,IAAP,CAAYb,QAAZ,EAAsBgB,UAAtB,CAAnB;EACA,OAAOH,IAAP;AACH,CAJD;;AAMAI,MAAM,CAACC,OAAP,GAAiBjB,IAAjB"}},"mtime":1704538071912},"{\"assumptions\":{},\"sourceRoot\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"filename\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/connectors.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/jamesstorr/Projects/Portfolio/portfolio-services\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.18.13:development":{"value":{"code":"const mongoose = require(\"mongoose\");\n\nconst DATABASE_URI = process.env.MONGODB_URI;\nconsole.log(DATABASE_URI);\nconst DATABASE_OPTIONS = {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n};\nmongoose.connect(DATABASE_URI, DATABASE_OPTIONS).then(() => {\n  console.log('Connected to MongoDB');\n}).catch(error => {\n  console.error(\"Error connecting to MongoDB:\", error);\n});\nmodule.exports = mongoose.connection;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJEQVRBQkFTRV9VUkkiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJjb25zb2xlIiwibG9nIiwiREFUQUJBU0VfT1BUSU9OUyIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3QiLCJ0aGVuIiwiY2F0Y2giLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb25uZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvamFtZXNzdG9yci9Qcm9qZWN0cy9Qb3J0Zm9saW8vcG9ydGZvbGlvLXNlcnZpY2VzL3NyYy9kYXRhLyIsInNvdXJjZXMiOlsiY29ubmVjdG9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuXG5cbmNvbnN0IERBVEFCQVNFX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuY29uc29sZS5sb2coREFUQUJBU0VfVVJJKTtcbmNvbnN0IERBVEFCQVNFX09QVElPTlMgPSB7XG4gIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxufTtcblxubW9uZ29vc2VcbiAgLmNvbm5lY3QoREFUQUJBU0VfVVJJLCBEQVRBQkFTRV9PUFRJT05TKVxuICAudGhlbigoKSA9PiB7IFxuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gTW9uZ29EQicpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNvbm5lY3RpbmcgdG8gTW9uZ29EQjpcIiwgZXJyb3IpO1xuICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5jb25uZWN0aW9uOyJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFHQSxNQUFNQyxZQUFZLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFqQztBQUNBQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUwsWUFBWjtBQUNBLE1BQU1NLGdCQUFnQixHQUFHO0VBQ3ZCQyxlQUFlLEVBQUUsSUFETTtFQUV2QkMsa0JBQWtCLEVBQUU7QUFGRyxDQUF6QjtBQUtBVixRQUFRLENBQ0xXLE9BREgsQ0FDV1QsWUFEWCxFQUN5Qk0sZ0JBRHpCLEVBRUdJLElBRkgsQ0FFUSxNQUFNO0VBQ1ZOLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHNCQUFaO0FBQ0QsQ0FKSCxFQUtHTSxLQUxILENBS1VDLEtBQUQsSUFBVztFQUNoQlIsT0FBTyxDQUFDUSxLQUFSLENBQWMsOEJBQWQsRUFBOENBLEtBQTlDO0FBQ0QsQ0FQSDtBQVNBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJoQixRQUFRLENBQUNpQixVQUExQiJ9","map":{"version":3,"names":["mongoose","require","DATABASE_URI","process","env","MONGODB_URI","console","log","DATABASE_OPTIONS","useNewUrlParser","useUnifiedTopology","connect","then","catch","error","module","exports","connection"],"sourceRoot":"/Users/jamesstorr/Projects/Portfolio/portfolio-services/src/data/","sources":["connectors.js"],"sourcesContent":["\nconst mongoose = require(\"mongoose\");\n\n\nconst DATABASE_URI = process.env.MONGODB_URI;\nconsole.log(DATABASE_URI);\nconst DATABASE_OPTIONS = {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n};\n\nmongoose\n  .connect(DATABASE_URI, DATABASE_OPTIONS)\n  .then(() => { \n    console.log('Connected to MongoDB');\n  })\n  .catch((error) => {\n    console.error(\"Error connecting to MongoDB:\", error);\n  });\n\nmodule.exports = mongoose.connection;"],"mappings":"AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAGA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYC,WAAjC;AACAC,OAAO,CAACC,GAAR,CAAYL,YAAZ;AACA,MAAMM,gBAAgB,GAAG;EACvBC,eAAe,EAAE,IADM;EAEvBC,kBAAkB,EAAE;AAFG,CAAzB;AAKAV,QAAQ,CACLW,OADH,CACWT,YADX,EACyBM,gBADzB,EAEGI,IAFH,CAEQ,MAAM;EACVN,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,CAJH,EAKGM,KALH,CAKUC,KAAD,IAAW;EAChBR,OAAO,CAACQ,KAAR,CAAc,8BAAd,EAA8CA,KAA9C;AACD,CAPH;AASAC,MAAM,CAACC,OAAP,GAAiBhB,QAAQ,CAACiB,UAA1B"}},"mtime":1704709017920}}